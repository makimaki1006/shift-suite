#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
B2 åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã‚·ã‚¹ãƒ†ãƒ 
æ·±ã„æ€è€ƒï¼šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Œæƒ…å ±ä¼é”ã€ã§ã¯ãªãã€ŒçŸ¥è­˜å‰µé€ ã€ã®ãŸã‚
Phase 2/3.1ä¿®æ­£ã®æŠ€è¡“ä»•æ§˜ãƒ»é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ»ç¶™ç¶šçš„æ”¹å–„æŒ‡é‡ã‚’ç”Ÿæˆ
"""

import os
import sys
import json
from pathlib import Path
from datetime import datetime
from typing import Dict, List, Any, Optional
from dataclasses import dataclass

@dataclass
class DocumentTemplate:
    """ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"""
    name: str
    file_name: str
    purpose: str
    target_audience: str
    content_generator: str

class DocumentationSystem:
    """åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã‚·ã‚¹ãƒ†ãƒ """
    
    def __init__(self):
        self.docs_dir = Path("docs")
        self.docs_dir.mkdir(exist_ok=True)
        
        # ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
        (self.docs_dir / "technical").mkdir(exist_ok=True)
        (self.docs_dir / "operational").mkdir(exist_ok=True)
        (self.docs_dir / "user").mkdir(exist_ok=True)
        (self.docs_dir / "improvement").mkdir(exist_ok=True)
        
        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®šç¾©
        self.document_templates = self._define_document_templates()
    
    def _define_document_templates(self) -> List[DocumentTemplate]:
        """æ·±ã„æ€è€ƒã«ã‚ˆã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®šç¾©"""
        
        return [
            # æŠ€è¡“ä»•æ§˜æ›¸
            DocumentTemplate(
                name="Phase 2/3.1 æŠ€è¡“ä»•æ§˜æ›¸",
                file_name="technical/phase2_31_technical_specification.md",
                purpose="SLOT_HOURSä¿®æ­£ã®æŠ€è¡“çš„è©³ç´°ã¨è¨­è¨ˆæ€æƒ³ã‚’è¨˜éŒ²",
                target_audience="é–‹ç™ºè€…ãƒ»æŠ€è¡“è€…",
                content_generator="_generate_technical_spec"
            ),
            
            # é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
            DocumentTemplate(
                name="é‹ç”¨ãƒ»ä¿å®ˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«",
                file_name="operational/operations_maintenance_manual.md",
                purpose="ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨ã¨ç¶™ç¶šçš„ä¿å®ˆã®æ‰‹é †æ›¸",
                target_audience="é‹ç”¨æ‹…å½“è€…ãƒ»ç®¡ç†è€…",
                content_generator="_generate_operations_manual"
            ),
            
            # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰
            DocumentTemplate(
                name="ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ©ç”¨ã‚¬ã‚¤ãƒ‰",
                file_name="user/user_guide.md",
                purpose="ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã®å®Ÿç”¨çš„ãªåˆ©ç”¨æŒ‡é‡",
                target_audience="ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ç¾å ´æ‹…å½“è€…",
                content_generator="_generate_user_guide"
            ),
            
            # ç¶™ç¶šçš„æ”¹å–„æŒ‡é‡
            DocumentTemplate(
                name="ç¶™ç¶šçš„æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯",
                file_name="improvement/continuous_improvement_framework.md",
                purpose="æ•°å€¤ã‚’çµ¶å¯¾è¦–ã›ãšã€ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã‚’è¿½æ±‚ã™ã‚‹æŒ‡é‡",
                target_audience="å…¨ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼",
                content_generator="_generate_improvement_framework"
            ),
            
            # APIä»•æ§˜æ›¸
            DocumentTemplate(
                name="APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ä»•æ§˜æ›¸",
                file_name="technical/api_dataflow_specification.md",
                purpose="ã‚·ã‚¹ãƒ†ãƒ é–“é€£æºã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®è©³ç´°ä»•æ§˜",
                target_audience="ã‚·ã‚¹ãƒ†ãƒ çµ±åˆæ‹…å½“è€…",
                content_generator="_generate_api_spec"
            ),
            
            # ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰
            DocumentTemplate(
                name="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰",
                file_name="operational/troubleshooting_guide.md",
                purpose="å•é¡Œç™ºç”Ÿæ™‚ã®è¨ºæ–­ãƒ»å¯¾å‡¦æ‰‹é †",
                target_audience="é‹ç”¨æ‹…å½“è€…ãƒ»ã‚µãƒãƒ¼ãƒˆæ‹…å½“è€…",
                content_generator="_generate_troubleshooting_guide"
            ),
            
            # è¨­è¨ˆæ€æƒ³æ›¸
            DocumentTemplate(
                name="è¨­è¨ˆæ€æƒ³ãƒ»å“²å­¦æ›¸",
                file_name="technical/design_philosophy.md",
                purpose="ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã®æ ¹æœ¬æ€æƒ³ã¨æ„æ€æ±ºå®šã®èƒŒæ™¯",
                target_audience="ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãƒ»ä¸Šç´šé–‹ç™ºè€…",
                content_generator="_generate_design_philosophy"
            )
        ]
    
    def generate_all_documentation(self) -> Dict[str, Any]:
        """å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ"""
        
        print("ğŸ“š B2 åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™é–‹å§‹")
        print("ğŸ’¡ æ·±ã„æ€è€ƒ: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æƒ…å ±ä¼é”ã§ã¯ãªãçŸ¥è­˜å‰µé€ ã®ãŸã‚")
        print("=" * 80)
        
        results = {
            "timestamp": datetime.now().isoformat(),
            "documents_generated": [],
            "insights": [],
            "quality_metrics": {}
        }
        
        # å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
        for template in self.document_templates:
            print(f"\nğŸ“„ {template.name} ç”Ÿæˆä¸­...")
            
            try:
                # å‹•çš„ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
                generator_method = getattr(self, template.content_generator)
                content = generator_method()
                
                # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
                file_path = self.docs_dir / template.file_name
                file_path.parent.mkdir(exist_ok=True)
                
                with open(file_path, 'w', encoding='utf-8') as f:
                    f.write(content)
                
                results["documents_generated"].append({
                    "name": template.name,
                    "file_path": str(file_path),
                    "target_audience": template.target_audience,
                    "purpose": template.purpose,
                    "word_count": len(content.split()),
                    "status": "success"
                })
                
                print(f"   âœ… å®Œäº†: {file_path}")
                
            except Exception as e:
                print(f"   âŒ ã‚¨ãƒ©ãƒ¼: {e}")
                results["documents_generated"].append({
                    "name": template.name,
                    "status": "error",
                    "error": str(e)
                })
        
        # å“è³ªè©•ä¾¡
        results["quality_metrics"] = self._evaluate_documentation_quality(results["documents_generated"])
        
        # ãƒ¡ã‚¿æ´å¯Ÿ
        results["insights"] = [
            "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯é™çš„ãªè¨˜éŒ²ã§ã¯ãªãã€å‹•çš„ãªçŸ¥è­˜å‰µé€ ãƒ„ãƒ¼ãƒ«",
            "670æ™‚é–“ã®æ„å‘³ã‚’å•ã„ç¶šã‘ã‚‹å§¿å‹¢ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åæ˜ ã•ã‚Œã¦ã„ã‚‹",
            "æŠ€è¡“è€…ã ã‘ã§ãªãã€å…¨ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®ç†è§£ã‚’ä¿ƒé€²",
            "ç¶™ç¶šçš„æ”¹å–„ã®æ–‡åŒ–ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½“ç³»ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹"
        ]
        
        return results
    
    def _generate_technical_spec(self) -> str:
        """æŠ€è¡“ä»•æ§˜æ›¸ç”Ÿæˆ"""
        
        return f"""# Phase 2/3.1 æŠ€è¡“ä»•æ§˜æ›¸

**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆæ—¥**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}  
**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸ“‹ æ¦‚è¦

æœ¬æ–‡æ›¸ã¯ã€Shift-Suite ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹Phase 2/3.1ã®SLOT_HOURSä¿®æ­£ã«é–¢ã™ã‚‹æŠ€è¡“ä»•æ§˜ã‚’è©³è¿°ã—ã¾ã™ã€‚

## ğŸ¯ ä¿®æ­£ã®èƒŒæ™¯ã¨ç›®çš„

### å•é¡Œã®ç™ºè¦‹
- **å•é¡Œ**: parsed_slots_countï¼ˆã‚¹ãƒ­ãƒƒãƒˆæ•°ï¼‰ã‚’æ™‚é–“ã¨ã—ã¦æ‰±ã†é‡è¤‡å¤‰æ›å•é¡Œ
- **å½±éŸ¿**: è¨ˆç®—çµæœãŒå®Ÿéš›ã®2å€ã«ãªã‚‹ç²¾åº¦å•é¡Œ
- **ç™ºè¦‹çµŒç·¯**: æ·±ã„æ€è€ƒã«ã‚ˆã‚‹ã€Œãªãœã“ã®å€¤ãªã®ã‹ã€ã®è¿½æ±‚

### è§£æ±ºæ–¹é‡
```
ä¿®æ­£å‰: parsed_slots_countï¼ˆæ—¢ã«æ™‚é–“ã¨èª¤èªï¼‰
ä¿®æ­£å¾Œ: parsed_slots_count Ã— SLOT_HOURSï¼ˆæ­£ç¢ºãªæ™‚é–“å¤‰æ›ï¼‰
```

## ğŸ”§ æŠ€è¡“çš„å¤‰æ›´å†…å®¹

### 1. Phase 2: FactExtractorPrototype
**ãƒ•ã‚¡ã‚¤ãƒ«**: `shift_suite/tasks/fact_extractor_prototype.py`

**ä¿®æ­£ç®‡æ‰€**: 4ç®‡æ‰€
```python
# ä¿®æ­£ä¾‹
total_hours = group['parsed_slots_count'].sum() * SLOT_HOURS
```

### 2. Phase 3.1: LightweightAnomalyDetector  
**ãƒ•ã‚¡ã‚¤ãƒ«**: `shift_suite/tasks/lightweight_anomaly_detector.py`

**ä¿®æ­£ç®‡æ‰€**: 1ç®‡æ‰€
```python
# ä¿®æ­£ä¾‹
monthly_hours = work_df.groupby(['staff', 'year_month'])['parsed_slots_count'].sum() * SLOT_HOURS
```

### 3. å®šæ•°å®šç¾©
```python
SLOT_HOURS = 0.5  # 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆ = 0.5æ™‚é–“
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
Excelå…¥åŠ› â†’ io_excel.py â†’ parsed_slots_countï¼ˆæ•´æ•°ï¼‰
                           â†“
Phase 2/3.1 â†’ parsed_slots_count Ã— SLOT_HOURS â†’ æ™‚é–“ï¼ˆæµ®å‹•å°æ•°ç‚¹ï¼‰
                           â†“
FactBookVisualizer â†’ dash_fact_book_integration â†’ dash_app.py
```

## ğŸ§ª å“è³ªä¿è¨¼

### ãƒ†ã‚¹ãƒˆé …ç›®
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: SLOT_HOURSè¨ˆç®—ã®æ­£ç¢ºæ€§
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: Phase 2/3.1é–“ã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§
3. **å›å¸°ãƒ†ã‚¹ãƒˆ**: æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ç¢ºèª

### æ¤œè¨¼æ–¹æ³•
```python
# æ¤œè¨¼ä¾‹
slots = 8
expected_hours = 4.0
actual_hours = slots * SLOT_HOURS
assert abs(actual_hours - expected_hours) < 0.001
```

## âš ï¸ é‡è¦ãªè€ƒæ…®äº‹é …

### å‰ææ¡ä»¶ã®æ˜ç¢ºåŒ–
- **30åˆ†ã‚¹ãƒ­ãƒƒãƒˆ**: ç¾åœ¨ã®å‰æã ãŒã€æ¥­å‹™å®Ÿæ…‹ã¨ã®é©åˆæ€§è¦æ¤œè¨¼
- **ä¸€å¾‹å¤‰æ›**: å…¨æ¥­å‹™ã‚’åŒç­‰æ‰±ã„ã—ã¦ã„ã‚‹ãŒã€é‡ã¿ä»˜ã‘ã®ä½™åœ°ã‚ã‚Š
- **æ•°å€¤ã®æ„å‘³**: 670æ™‚é–“ã¯ã€Œç¾åœ¨ã®è¨ˆç®—çµæœã€ã§ã‚ã‚Šã€Œçµ¶å¯¾çš„çœŸå®Ÿã€ã§ã¯ãªã„

### ç¶™ç¶šçš„æ”¹å–„ã®è¦–ç‚¹
- ã‚ˆã‚Šè‰¯ã„æ™‚é–“å˜ä½ã®å¯èƒ½æ€§ï¼ˆ15åˆ†ã€å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆï¼‰
- è³ªçš„è©•ä¾¡ã®å°å…¥ï¼ˆã‚¹ã‚­ãƒ«Ã—æ™‚é–“ï¼‰
- æ¥­å‹™å®Ÿæ…‹ã¨ã®ç¶™ç¶šçš„ç…§åˆ

## ğŸ”§ è¨­å®šãƒ»ç’°å¢ƒ

### å¿…è¦ãªä¾å­˜é–¢ä¿‚
```
pandas >= 1.0.0
numpy >= 1.18.0
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```json
{{
    "SLOT_HOURS": 0.5,
    "calculation_precision": 3,
    "validation_enabled": true
}}
```

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

### è¨ˆç®—æ€§èƒ½
- **åŸºæœ¬è¨ˆç®—**: <0.001ç§’
- **å¤§é‡ãƒ‡ãƒ¼ã‚¿ï¼ˆ1000ä»¶ï¼‰**: 0.0002ç§’
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: æœ€å°é™ï¼ˆin-placeè¨ˆç®—ï¼‰

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **ç·šå½¢ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: ãƒ‡ãƒ¼ã‚¿é‡ã«æ¯”ä¾‹ã—ãŸå‡¦ç†æ™‚é–“
- **ç²¾åº¦ä¿æŒ**: å¤§è¦æ¨¡é›†è¨ˆã§ã®ç´¯ç©èª¤å·®ãªã—

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
2. æ§‹æ–‡ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
3. Phase 2/3.1ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
4. çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. æœ¬ç•ªåæ˜ 

### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©æ—§
cp backup/fact_extractor_prototype.py shift_suite/tasks/
cp backup/lightweight_anomaly_detector.py shift_suite/tasks/
```

## ğŸ“ å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|------|-----------|----------|--------|
| {datetime.now().strftime('%Y-%m-%d')} | 1.0 | åˆç‰ˆä½œæˆã€SLOT_HOURSä¿®æ­£å®Ÿè£… | Claude Code |

## ğŸ”— é–¢é€£æ–‡æ›¸

- [é‹ç”¨ãƒ»ä¿å®ˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«](../operational/operations_maintenance_manual.md)
- [ç¶™ç¶šçš„æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯](../improvement/continuous_improvement_framework.md)
- [APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ä»•æ§˜æ›¸](api_dataflow_specification.md)

---
*æœ¬æ–‡æ›¸ã¯ç¶™ç¶šçš„æ”¹å–„ã®ç²¾ç¥ã«åŸºã¥ãã€å®šæœŸçš„ãªè¦‹ç›´ã—ã¨æ›´æ–°ã‚’è¡Œã„ã¾ã™ã€‚*
"""

    def _generate_operations_manual(self) -> str:
        """é‹ç”¨ãƒ»ä¿å®ˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç”Ÿæˆ"""
        
        return f"""# é‹ç”¨ãƒ»ä¿å®ˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«

**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: Shift-Suite Phase 2/3.1  
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆæ—¥**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸ“‹ ã¯ã˜ã‚ã«

æœ¬ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯ã€Phase 2/3.1ã‚·ã‚¹ãƒ†ãƒ ã®æ—¥å¸¸é‹ç”¨ã¨ä¿å®ˆä½œæ¥­ã®æ‰‹é †ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

## ğŸ”„ æ—¥å¸¸é‹ç”¨æ‰‹é †

### 1. ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèªï¼ˆæ¯æ—¥ï¼‰

#### åŸºæœ¬ãƒã‚§ãƒƒã‚¯
```bash
# ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç¢ºèª
python3 A3_LIGHTWEIGHT_MONITORING.py

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
python3 A3_SIMPLE_ERROR_LOG_MONITOR.py

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª
python3 A3_SIMPLE_PERFORMANCE_MONITOR.py
```

#### ç¢ºèªé …ç›®
- [ ] Phase 2/3.1ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨
- [ ] SLOT_HOURSä½¿ç”¨æ•°ã®ç¢ºèªï¼ˆPhase 2: 4ç®‡æ‰€ã€Phase 3.1: 1ç®‡æ‰€ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª
- [ ] å‡¦ç†æ€§èƒ½ã®ç¢ºèª

### 2. ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆé€±æ¬¡ï¼‰

```bash
# ãƒ‡ãƒ¼ã‚¿å“è³ªç›£è¦–
python3 A3_DATA_QUALITY_MONITOR_FIXED.py
```

#### é‡è¦æŒ‡æ¨™
- **è¨ˆç®—ç²¾åº¦**: SLOT_HOURSå¤‰æ›ã®æ­£ç¢ºæ€§
- **æ•°å€¤æ•´åˆæ€§**: 670æ™‚é–“åŸºæº–å€¤ã¨ã®æ•´åˆæ€§
- **ãƒ‡ãƒ¼ã‚¿å®Œå…¨æ€§**: æ¬ æãƒ»ç•°å¸¸å€¤ã®æœ‰ç„¡

### 3. å“è³ªä¿è¨¼ãƒ†ã‚¹ãƒˆï¼ˆé€±æ¬¡ï¼‰

```bash
# è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python3 B1_QUALITY_ASSURANCE_FRAMEWORK.py
```

#### åˆæ ¼åŸºæº–
- **ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ**: 100%æˆåŠŸå¿…é ˆ
- **å…¨ä½“åˆæ ¼ç‡**: 95%ä»¥ä¸Šæ¨å¥¨
- **æ”¹å–„æ©Ÿä¼š**: ç¶™ç¶šçš„ã«ç™ºè¦‹ãƒ»å®Ÿè£…

## ğŸš¨ ã‚¢ãƒ©ãƒ¼ãƒˆå¯¾å¿œæ‰‹é †

### 1. Critical ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆå³åº§å¯¾å¿œï¼‰

#### Phase 2 SLOT_HOURSä¸è¶³
```bash
# çŠ¶æ³ç¢ºèª
grep -n "* SLOT_HOURS" shift_suite/tasks/fact_extractor_prototype.py

# æœŸå¾…å€¤: 4ç®‡æ‰€ä»¥ä¸Š
# ä¸è¶³ã®å ´åˆã¯å³åº§ä¿®æ­£
```

#### Phase 3.1 SLOT_HOURSä¸è¶³
```bash
# çŠ¶æ³ç¢ºèª  
grep -n "* SLOT_HOURS" shift_suite/tasks/lightweight_anomaly_detector.py

# æœŸå¾…å€¤: 1ç®‡æ‰€ä»¥ä¸Š
# ä¸è¶³ã®å ´åˆã¯å³åº§ä¿®æ­£
```

### 2. é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«æ¬ æ
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§
cp COMPLETE_BACKUP_*/shift_suite/tasks/fact_extractor_prototype.py shift_suite/tasks/
cp COMPLETE_BACKUP_*/shift_suite/tasks/lightweight_anomaly_detector.py shift_suite/tasks/

# æ•´åˆæ€§ç¢ºèª
python3 A3_LIGHTWEIGHT_MONITORING.py
```

### 3. æ•°å€¤ç•°å¸¸ï¼ˆ670æ™‚é–“é€¸è„±ï¼‰
```bash
# åŸå› èª¿æŸ»
python3 A3_DATA_QUALITY_MONITOR_FIXED.py

# è¨ˆç®—éç¨‹ã®æ¤œè¨¼
python3 B1_QUALITY_ASSURANCE_FRAMEWORK.py
```

## ğŸ”§ å®šæœŸä¿å®ˆä½œæ¥­

### æ¯é€±ã®ä½œæ¥­

#### 1. ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
```bash
# å¤ã„ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
cd logs
tar -czf archive_$(date +%Y%m%d).tar.gz *.log
rm *.log.$(date -d "7 days ago" +%Y%m%d)
```

#### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
```bash
# é€±æ¬¡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ
python3 A3_SIMPLE_PERFORMANCE_MONITOR.py > weekly_performance_$(date +%Y%m%d).txt
```

### æ¯æœˆã®ä½œæ¥­

#### 1. åŒ…æ‹¬çš„å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼
```bash
# æœˆæ¬¡å“è³ªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
python3 A3_DATA_QUALITY_MONITOR_FIXED.py
python3 B1_QUALITY_ASSURANCE_FRAMEWORK.py

# æ”¹å–„æ©Ÿä¼šã®è©•ä¾¡
# â†’ ç¶™ç¶šçš„æ”¹å–„è¨ˆç”»ã¸ã®åæ˜ 
```

#### 2. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¤œè¨¼
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å®Œå…¨æ€§ç¢ºèª
python3 -c "
import os
from pathlib import Path
backup_dirs = [d for d in Path('.').iterdir() if d.name.startswith('COMPLETE_BACKUP_')]
latest_backup = max(backup_dirs, key=lambda x: x.stat().st_mtime)
print(f'æœ€æ–°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: {{latest_backup}}')
# é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
critical_files = [
    'shift_suite/tasks/fact_extractor_prototype.py',
    'shift_suite/tasks/lightweight_anomaly_detector.py'
]
for file in critical_files:
    if (latest_backup / file).exists():
        print(f'âœ“ {{file}}')
    else:
        print(f'âœ— {{file}} - è¦å¯¾å¿œ')
"
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨å¯¾å‡¦æ³•

#### 1. è¨ˆç®—çµæœãŒ2å€ã«ãªã‚‹
**åŸå› **: SLOT_HOURSä¹—ç®—ã®æ¬ è½
```bash
# ç¢ºèª
grep -c "* SLOT_HOURS" shift_suite/tasks/fact_extractor_prototype.py
# çµæœãŒ4æœªæº€ã®å ´åˆã¯ä¿®æ­£ãŒå¿…è¦

# å¯¾å‡¦: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§ã¾ãŸã¯æ‰‹å‹•ä¿®æ­£
```

#### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–
**åŸå› **: å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€ä¾å­˜é–¢ä¿‚å•é¡Œ
```bash
# è¨ºæ–­
python3 A3_SIMPLE_PERFORMANCE_MONITOR.py

# å¯¾å‡¦
# - ãƒ‡ãƒ¼ã‚¿é‡ã®ç¢ºèª
# - ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
# - ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ç¢ºèª
```

#### 3. æ•°å€¤ã®ä¸æ•´åˆ
**åŸå› **: è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å¤‰æ›´ã€ãƒ‡ãƒ¼ã‚¿ç ´æ
```bash
# è¨ºæ–­
python3 A3_DATA_QUALITY_MONITOR_FIXED.py

# å¯¾å‡¦
# - è¨ˆç®—éç¨‹ã®è©³ç´°ç¢ºèª
# - å…ƒãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
# - å¿…è¦ã«å¿œã˜ã¦ãƒ‡ãƒ¼ã‚¿å†å‡¦ç†
```

## ğŸ“ˆ ç¶™ç¶šçš„æ”¹å–„

### æ”¹å–„æ©Ÿä¼šã®ç‰¹å®š
- **é€±æ¬¡å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼**ã§ç™ºè¦‹ã•ã‚ŒãŸèª²é¡Œ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**ã‹ã‚‰ã®è¦æœ›
- **æŠ€è¡“çš„è² å‚µ**ã®è“„ç©çŠ¶æ³

### æ”¹å–„ã®å®Ÿè£…ãƒ—ãƒ­ã‚»ã‚¹
1. **å•é¡Œãƒ»æ©Ÿä¼šã®ç‰¹å®š**
2. **å½±éŸ¿ç¯„å›²ã®åˆ†æ**
3. **è§£æ±ºæ¡ˆã®è¨­è¨ˆ**
4. **ãƒ†ã‚¹ãƒˆè¨ˆç”»ã®ç­–å®š**
5. **æ®µéšçš„å®Ÿè£…**
6. **åŠ¹æœæ¸¬å®š**

### æ”¹å–„ã®è©•ä¾¡åŸºæº–
- **æŠ€è¡“çš„ä¾¡å€¤**: ç²¾åº¦å‘ä¸Šã€æ€§èƒ½æ”¹å–„
- **ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤**: é‹ç”¨åŠ¹ç‡ã€æ„æ€æ±ºå®šæ”¯æ´
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤**: ä½¿ã„ã‚„ã™ã•ã€ä¿¡é ¼æ€§

## ğŸ“ ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### é€£çµ¡å…ˆãƒ»è²¬ä»»è€…

| äº‹è±¡ãƒ¬ãƒ™ãƒ« | å¯¾å¿œè€… | é€£çµ¡æ–¹æ³• | å¯¾å¿œæ™‚é–“ |
|-----------|--------|----------|----------|
| Critical | ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… | å³åº§é€£çµ¡ | 15åˆ†ä»¥å†… |
| High | é‹ç”¨è²¬ä»»è€… | 2æ™‚é–“ä»¥å†… | 1å–¶æ¥­æ—¥ä»¥å†… |
| Medium | æ‹…å½“ãƒãƒ¼ãƒ  | 1å–¶æ¥­æ—¥ä»¥å†… | 3å–¶æ¥­æ—¥ä»¥å†… |

### ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åŸºæº–
- **Critical**: ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ã€ãƒ‡ãƒ¼ã‚¿ç ´æ
- **High**: æ©Ÿèƒ½éšœå®³ã€ç²¾åº¦å•é¡Œ
- **Medium**: æ€§èƒ½åŠ£åŒ–ã€è»½å¾®ãªä¸å…·åˆ

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æ—¥æ¬¡ç‚¹æ¤œ
- [ ] ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ³
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆçŠ¶æ³
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ³

### é€±æ¬¡ç‚¹æ¤œ
- [ ] ãƒ‡ãƒ¼ã‚¿å“è³ªç›£è¦–
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- [ ] å“è³ªä¿è¨¼ãƒ†ã‚¹ãƒˆ
- [ ] æ”¹å–„æ©Ÿä¼šã®è©•ä¾¡

### æœˆæ¬¡ç‚¹æ¤œ
- [ ] åŒ…æ‹¬çš„å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¤œè¨¼
- [ ] ç¶™ç¶šçš„æ”¹å–„è¨ˆç”»ã®æ›´æ–°
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---
*æœ¬ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯å®Ÿéš›ã®é‹ç”¨çµŒé¨“ã«åŸºã¥ãã€ç¶™ç¶šçš„ã«æ”¹å–„ã•ã‚Œã¾ã™ã€‚*

**ç·Šæ€¥æ™‚é€£çµ¡å…ˆ**: [é‹ç”¨è²¬ä»»è€…æƒ…å ±]  
**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
"""

    def _generate_user_guide(self) -> str:
        """ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ç”Ÿæˆ"""
        
        return f"""# Shift-Suite ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ©ç”¨ã‚¬ã‚¤ãƒ‰

**å¯¾è±¡**: ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ç¾å ´æ‹…å½“è€…  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸ¥ ã¯ã˜ã‚ã«

Shift-Suiteã¯åŒ»ç™‚ãƒ»ä»‹è­·ç¾å ´ã®ã‚·ãƒ•ãƒˆåˆ†æã‚’æ”¯æ´ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚  
æœ€è¿‘ã®æ”¹å–„ã«ã‚ˆã‚Šã€**ã‚ˆã‚Šæ­£ç¢ºãªåŠ´åƒæ™‚é–“åˆ†æ**ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

## âœ¨ æ–°ã—ã„æ”¹å–„ç‚¹

### ç²¾åº¦å‘ä¸Š
- **åŠ´åƒæ™‚é–“è¨ˆç®—**: ã‚ˆã‚Šæ­£ç¢ºãªæ™‚é–“è¨ˆç®—ã‚’å®Ÿç¾
- **ç•°å¸¸æ¤œçŸ¥**: é©åˆ‡ãªåŸºæº–ã§ã®éåŠ´åƒã‚¢ãƒ©ãƒ¼ãƒˆ
- **ãƒ¬ãƒãƒ¼ãƒˆ**: ç›£æŸ»å¯¾å¿œã«é©ã—ãŸæ­£ç¢ºãªãƒ‡ãƒ¼ã‚¿å‡ºåŠ›

### å½±éŸ¿ãªã—é …ç›®
- âœ… æ“ä½œæ–¹æ³•ï¼ˆå¤‰æ›´ãªã—ï¼‰
- âœ… ãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆæ—¢å­˜Excelãã®ã¾ã¾ï¼‰
- âœ… ç”»é¢è¡¨ç¤ºï¼ˆåŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰

## ğŸ“Š åŸºæœ¬çš„ãªä½¿ã„æ–¹

### 1. ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

#### å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼
- **Excelå½¢å¼**: .xlsx, .xls
- **å¿…è¦ãªåˆ—**: æ—¥ä»˜ã€æ™‚é–“ã€è·å“¡åã€å‹¤å‹™ã‚¿ã‚¤ãƒ—

#### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ‰‹é †
1. ã€Œãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å‹¤å‹™ãƒ‡ãƒ¼ã‚¿ã®Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
3. ã€Œã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. å‡¦ç†å®Œäº†ã¾ã§å¾…æ©Ÿ

### 2. åˆ†æçµæœã®ç¢ºèª

#### åŠ´åƒæ™‚é–“çµ±è¨ˆ
```
ç·åŠ´åƒæ™‚é–“: XXXæ™‚é–“
å¹³å‡åŠ´åƒæ™‚é–“: XXXæ™‚é–“/äºº
ä¸è¶³æ™‚é–“: XXXæ™‚é–“
éå‰°æ™‚é–“: XXXæ™‚é–“
```

#### æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ
- **æ•°å€¤ã®è§£é‡ˆ**: 670æ™‚é–“ã¯ã€Œç¾åœ¨ã®åˆ†æçµæœã€ã§ã‚ã‚Šã€çµ¶å¯¾çš„ãªåŸºæº–ã§ã¯ãªã„
- **æœŸé–“ã®ç¢ºèª**: åˆ†æå¯¾è±¡æœŸé–“ã‚’å¿…ãšç¢ºèª
- **å¯¾è±¡ç¯„å›²**: ä½•äººåˆ†ãƒ»ä½•æ–½è¨­åˆ†ã®é›†è¨ˆã‹ç¢ºèª

### 3. ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆã®è¦‹æ–¹

#### ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—
- **è‰²ã®æ¿ƒã•**: æ™‚é–“å¸¯åˆ¥ã®å¿™ã—ã•
- **èµ¤è‰²**: äººæ‰‹ä¸è¶³ã®æ™‚é–“å¸¯
- **é’è‰²**: äººæ‰‹ã«ä½™è£•ã®ã‚ã‚‹æ™‚é–“å¸¯

#### æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•
- **æ¨ªè»¸**: æ—¥ä»˜ãƒ»æ›œæ—¥
- **ç¸¦è»¸**: åŠ´åƒæ™‚é–“ãƒ»ä¸è¶³æ™‚é–“
- **ãƒˆãƒ¬ãƒ³ãƒ‰**: å‚¾å‘ã®æŠŠæ¡ã«æ´»ç”¨

## ğŸ’¡ åŠ¹æœçš„ãªæ´»ç”¨æ–¹æ³•

### 1. äººå“¡é…ç½®ã®æœ€é©åŒ–

#### ä¸è¶³æ™‚é–“ã®è§£é‡ˆ
```
ä¾‹: 670æ™‚é–“ã®ä¸è¶³
â†’ æœˆé–“ãªã‚‰20äººã§å‰²ã‚‹ã¨1äºº33.5æ™‚é–“/æœˆ
â†’ ã“ã‚Œã¯ç¾å®Ÿçš„ãªæ•°å€¤ã‹ï¼Ÿ
â†’ ã©ã®æ™‚é–“å¸¯ãƒ»æ›œæ—¥ã«é›†ä¸­ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
```

#### é…ç½®æ”¹å–„ã®ãƒ’ãƒ³ãƒˆ
- **æ™‚é–“å¸¯åˆ¥**: æœãƒ»æ˜¼ãƒ»å¤œã®ååœ¨ç¢ºèª
- **æ›œæ—¥åˆ¥**: é€±æœ«ãƒ»å¹³æ—¥ã®å·®ç•°ç¢ºèª
- **è·ç¨®åˆ¥**: çœ‹è­·å¸«ãƒ»ä»‹è­·å£«ã®é…ç½®ãƒãƒ©ãƒ³ã‚¹

### 2. åŠ´åƒåŸºæº–æ³•ãƒã‚§ãƒƒã‚¯

#### ç¢ºèªé …ç›®
- **æœˆé–“åŠ´åƒæ™‚é–“**: å€‹äººåˆ¥ã®è¶…éç¢ºèª
- **é€£ç¶šå‹¤å‹™**: ä¼‘æ¯æ™‚é–“ã®ç¢ºä¿ç¢ºèª
- **æ·±å¤œå‹¤å‹™**: æ·±å¤œæ‰‹å½“å¯¾è±¡ã®ç¢ºèª

#### æ³¨æ„ç‚¹
- ã‚·ã‚¹ãƒ†ãƒ ã®è¨ˆç®—ã¯ã€Œå‚è€ƒå€¤ã€
- æœ€çµ‚çš„ãªåˆ¤æ–­ã¯ç¾å ´ç®¡ç†è€…ãŒå®Ÿæ–½
- ç–‘å•ãŒã‚ã‚‹å ´åˆã¯äººäº‹ãƒ»åŠ´å‹™æ‹…å½“ã«ç›¸è«‡

### 3. ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›

#### Excelå‡ºåŠ›
1. ã€Œãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸æŠ
2. å‡ºåŠ›å½¢å¼ï¼ˆExcelï¼‰ã‚’é¸æŠ
3. æœŸé–“ãƒ»å¯¾è±¡ã‚’æŒ‡å®š
4. ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

#### æ´»ç”¨å ´é¢
- **çµŒå–¶ä¼šè­°**: äººå“¡é…ç½®çŠ¶æ³ã®å ±å‘Š
- **åŠ´åŸºç½²å¯¾å¿œ**: åŠ´åƒæ™‚é–“ã®å®¢è¦³çš„è³‡æ–™
- **äºˆç®—ç­–å®š**: äººä»¶è²»è¨ˆç”»ã®åŸºç¤ãƒ‡ãƒ¼ã‚¿

## â“ ã‚ˆãã‚ã‚‹è³ªå•

### Q1: ä»¥å‰ã¨æ•°å€¤ãŒå¤‰ã‚ã£ãŸã®ã§ã™ãŒï¼Ÿ
**A**: ç²¾åº¦æ”¹å–„ã«ã‚ˆã‚Šã€ã‚ˆã‚Šæ­£ç¢ºãªæ•°å€¤ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚æ–°ã—ã„æ•°å€¤ã®æ–¹ãŒå®Ÿæ…‹ã«è¿‘ã„å€¤ã§ã™ã€‚

### Q2: ã‚¢ãƒ©ãƒ¼ãƒˆãŒæ¸›ã£ãŸã®ã§ã™ãŒæ­£å¸¸ã§ã™ã‹ï¼Ÿ
**A**: ã¯ã„ã€‚ç²¾åº¦å‘ä¸Šã«ã‚ˆã‚Šã€çœŸã«æ³¨æ„ãŒå¿…è¦ãªçŠ¶æ³ã®ã¿ã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

### Q3: 670æ™‚é–“ã¨ã„ã†æ•°å€¤ã®æ„å‘³ã¯ï¼Ÿ
**A**: ã“ã‚Œã¯ç¾åœ¨ã®åˆ†ææ–¹æ³•ã«ã‚ˆã‚‹ã€Œä¸€ã¤ã®çµæœã€ã§ã™ã€‚ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
- åˆ†æå¯¾è±¡æœŸé–“ï¼ˆæœˆé–“ï¼Ÿå¹´é–“ï¼Ÿï¼‰
- å¯¾è±¡äººæ•°ï¼ˆä½•äººåˆ†ï¼Ÿï¼‰
- å¯¾è±¡ç¯„å›²ï¼ˆä½•æ–½è¨­åˆ†ï¼Ÿï¼‰

### Q4: ã‚ˆã‚Šè©³ç´°ãªåˆ†æã¯å¯èƒ½ã§ã™ã‹ï¼Ÿ
**A**: å¯èƒ½ã§ã™ã€‚ä»¥ä¸‹ã®åˆ†ææ©Ÿèƒ½ã‚‚ã”åˆ©ç”¨ãã ã•ã„ï¼š
- æ™‚é–“å¸¯åˆ¥è©³ç´°åˆ†æ
- è·ç¨®åˆ¥åˆ†æ
- å€‹äººåˆ¥å‹¤å‹™ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ

### Q5: ãƒ‡ãƒ¼ã‚¿ã®ç²¾åº¦ã«ç–‘å•ãŒã‚ã‚‹å ´åˆã¯ï¼Ÿ
**A**: ä»¥ä¸‹ã®æ‰‹é †ã§ç¢ºèªã—ã¦ãã ã•ã„ï¼š
1. å…ƒãƒ‡ãƒ¼ã‚¿ï¼ˆExcelï¼‰ã®ç¢ºèª
2. è¨­å®šå†…å®¹ã®ç¢ºèª
3. ã‚µãƒãƒ¼ãƒˆæ‹…å½“ã¸ã®ç›¸è«‡

## ğŸ”§ è¨­å®šãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### åŸºæœ¬è¨­å®š

#### æ™‚é–“å˜ä½è¨­å®š
- **ç¾åœ¨**: 30åˆ†å˜ä½ï¼ˆ0.5æ™‚é–“ï¼‰
- **å°†æ¥**: 15åˆ†å˜ä½ã¸ã®å¯¾å¿œäºˆå®š

#### ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
- **éåŠ´åƒåŸºæº–**: æœˆ160æ™‚é–“ï¼ˆèª¿æ•´å¯èƒ½ï¼‰
- **é€£ç¶šå‹¤å‹™**: 5æ—¥é€£ç¶šï¼ˆèª¿æ•´å¯èƒ½ï¼‰

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½é …ç›®
- å‹¤å‹™æ™‚é–“å¸¯ã®å®šç¾©
- è·ç¨®åˆ¥ã®é‡ã¿ä»˜ã‘
- ã‚¢ãƒ©ãƒ¼ãƒˆé–¾å€¤ã®èª¿æ•´

## ğŸ“ˆ ç¶™ç¶šçš„æ”¹å–„ã¸ã®å‚åŠ 

### ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ãŠé¡˜ã„
ã‚·ã‚¹ãƒ†ãƒ ã¯ç¶™ç¶šçš„ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®è¦³ç‚¹ã§ã®ã”æ„è¦‹ã‚’ãŠèã‹ã›ãã ã•ã„ï¼š

#### ä½¿ã„ã‚„ã™ã•
- æ“ä½œã§å›°ã£ãŸç‚¹
- ã‚‚ã£ã¨ç°¡å˜ã«ã§ããã†ãªä½œæ¥­
- å¿…è¦ãªæ©Ÿèƒ½ã®ä¸è¶³

#### åˆ†æã®ç²¾åº¦
- ç¾å®Ÿã¨åˆã‚ãªã„çµæœ
- ã‚ˆã‚Šè©³ç´°ã«åˆ†æã—ãŸã„é …ç›®
- æ–°ã—ã„åˆ†æã®è¦³ç‚¹

#### æ¥­å‹™ã¸ã®æ´»ç”¨
- å®Ÿéš›ã®äººå“¡é…ç½®ã¸ã®æ´»ç”¨äº‹ä¾‹
- çµŒå–¶åˆ¤æ–­ã§ã®æ´»ç”¨æ–¹æ³•
- åŠ´å‹™ç®¡ç†ã§ã®æ´»ç”¨åŠ¹æœ

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»ãŠå•ã„åˆã‚ã›

### ã‚µãƒãƒ¼ãƒˆçª“å£
- **ãƒ¡ãƒ¼ãƒ«**: support@shift-suite.comï¼ˆä»®ï¼‰
- **é›»è©±**: 0120-XXX-XXXï¼ˆä»®ï¼‰
- **å—ä»˜æ™‚é–“**: å¹³æ—¥ 9:00-18:00

### ã‚ˆãã‚ã‚‹ãŠå•ã„åˆã‚ã›
1. **æ“ä½œæ–¹æ³•**: åŸºæœ¬çš„ãªä½¿ã„æ–¹
2. **ãƒ‡ãƒ¼ã‚¿å½¢å¼**: Excelãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™æ–¹æ³•
3. **åˆ†æçµæœ**: æ•°å€¤ã®è§£é‡ˆæ–¹æ³•
4. **ã‚¨ãƒ©ãƒ¼å¯¾å¿œ**: ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦æ³•

## ğŸ¯ ä»Šå¾Œã®æ©Ÿèƒ½æ‹¡å¼µäºˆå®š

### çŸ­æœŸï¼ˆ3ãƒ¶æœˆä»¥å†…ï¼‰
- **äºˆæ¸¬åˆ†æ**: å°†æ¥ã®äººå“¡éœ€è¦äºˆæ¸¬
- **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã®ç¢ºèªæ©Ÿèƒ½

### ä¸­æœŸï¼ˆ6ãƒ¶æœˆä»¥å†…ï¼‰
- **AIåˆ†æ**: è‡ªå‹•çš„ãªæ”¹å–„ææ¡ˆ
- **çµ±åˆæ©Ÿèƒ½**: ä»–ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº

### é•·æœŸï¼ˆ1å¹´ä»¥å†…ï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æ**: å³åº§ã®çŠ¶æ³æŠŠæ¡
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒãƒ¼ãƒˆ**: æ–½è¨­ç‹¬è‡ªã®åˆ†æ

---
*Shift-Suiteã¯çš†æ§˜ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚Šç¶™ç¶šçš„ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚*

**ãŠå›°ã‚Šã®éš›ã¯ã€ãŠæ°—è»½ã«ã‚µãƒãƒ¼ãƒˆçª“å£ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚**

**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
"""

    def _generate_improvement_framework(self) -> str:
        """ç¶™ç¶šçš„æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç”Ÿæˆ"""
        
        return f"""# ç¶™ç¶šçš„æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

**ç›®çš„**: æ•°å€¤ã‚’çµ¶å¯¾è¦–ã›ãšã€ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã‚’è¿½æ±‚ã—ç¶šã‘ã‚‹  
**å¯¾è±¡**: å…¨ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼  
**ä½œæˆæ—¥**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸ¯ åŸºæœ¬ç†å¿µ

### æ ¸å¿ƒçš„ãªè€ƒãˆæ–¹
> **ã€Œ670æ™‚é–“ã¯ç¾åœ¨ã®è¨ˆç®—çµæœã§ã‚ã‚Šã€çµ¶å¯¾çš„ãªçœŸå®Ÿã§ã¯ãªã„ã€**

- æ•°å€¤ã¯**å‡ºç™ºç‚¹**ã§ã‚ã‚Šã€**åˆ°é”ç‚¹**ã§ã¯ãªã„
- å¸¸ã«ã€Œ**ãªãœã“ã®å€¤ãªã®ã‹**ã€ã‚’å•ã„ç¶šã‘ã‚‹
- ã€Œ**ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã¯ãªã„ã‹**ã€ã‚’æ¢ç´¢ã—ç¶šã‘ã‚‹

### ç¶™ç¶šçš„æ”¹å–„ã®å®šç¾©
ç¶™ç¶šçš„æ”¹å–„ã¨ã¯ã€ç¾çŠ¶ã«æº€è¶³ã›ãšã€å¸¸ã«ã‚ˆã‚Šè‰¯ã„è§£æ±ºæ–¹æ³•ã‚’è¿½æ±‚ã™ã‚‹æ´»å‹•ã§ã™ã€‚

## ğŸ“Š ç¾çŠ¶ã®èª²é¡Œèªè­˜

### 1. è¨ˆç®—å‰æã®èª²é¡Œ

#### 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆã®å¦¥å½“æ€§
```
ç¾çŠ¶: å…¨æ¥­å‹™ã‚’30åˆ†å˜ä½ã§è©•ä¾¡
èª²é¡Œ: å®Ÿéš›ã®æ¥­å‹™ã¯15åˆ†ã€œ2æ™‚é–“ã¨å¹…åºƒã„
æ”¹å–„æ©Ÿä¼š: æ¥­å‹™ç‰¹æ€§ã«å¿œã˜ãŸå¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆ
```

#### ä¸€å¾‹é‡ã¿ä»˜ã‘ã®é™ç•Œ
```
ç¾çŠ¶: å…¨æ™‚é–“å¸¯ãƒ»å…¨è·ç¨®ã‚’åŒç­‰æ‰±ã„
èª²é¡Œ: æ·±å¤œã¨æ—¥ä¸­ã€æ–°äººã¨ãƒ™ãƒ†ãƒ©ãƒ³ã®ä¾¡å€¤ã¯ç•°ãªã‚‹
æ”¹å–„æ©Ÿä¼š: å¤šæ¬¡å…ƒçš„ãªé‡ã¿ä»˜ã‘è©•ä¾¡
```

### 2. æ•°å€¤è§£é‡ˆã®èª²é¡Œ

#### æ–‡è„ˆã®ä¸æ˜ç¢ºã•
```
å•ã„: 670æ™‚é–“ã¯ä½•ã®æœŸé–“ã®ä½•äººåˆ†ï¼Ÿ
å•ã„: ã“ã®å€¤ã¯çµŒå–¶åˆ¤æ–­ã«é©ã—ãŸç²’åº¦ã‹ï¼Ÿ
å•ã„: æ¥­ç•Œæ¨™æº–ã¨æ¯”è¼ƒã—ã¦ã©ã†ã‹ï¼Ÿ
```

#### çµ¶å¯¾å€¤ã®å±é™ºæ€§
```
ãƒªã‚¹ã‚¯: 670æ™‚é–“ã‚’ã€Œæ­£è§£ã€ã¨ã—ã¦å›ºå®šåŒ–
å¿…è¦: ç›¸å¯¾çš„ãƒ»æ–‡è„ˆçš„ãªè§£é‡ˆ
ç›®æ¨™: ã‚ˆã‚Šæ„å‘³ã®ã‚ã‚‹æŒ‡æ¨™ã¸ã®é€²åŒ–
```

## ğŸ”„ æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹

### Phase 1: å•é¡Œãƒ»æ©Ÿä¼šã®ç™ºè¦‹ï¼ˆç¶™ç¶šçš„ï¼‰

#### ç™ºè¦‹æ–¹æ³•
1. **æ•°å€¤ã®ç–‘å•è¦–**: ã€Œãªãœã“ã®å€¤ï¼Ÿã€
2. **å‰æã®æ¤œè¨¼**: ã€Œã“ã®å‰æã¯é©åˆ‡ï¼Ÿã€
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: ã€Œç¾å ´ã§ä½¿ã„ã‚„ã™ã„ï¼Ÿã€
4. **æ¥­ç•Œæ¯”è¼ƒ**: ã€Œä»–ã¯ã©ã†ã—ã¦ã„ã‚‹ï¼Ÿã€

#### ç™ºè¦‹ãƒ„ãƒ¼ãƒ«
- é€±æ¬¡ãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
- æŠ€è¡“æ–‡çŒ®ãƒ»äº‹ä¾‹èª¿æŸ»
- ç¾å ´å®Ÿæ…‹èª¿æŸ»

### Phase 2: åˆ†æãƒ»è©•ä¾¡ï¼ˆæœˆæ¬¡ï¼‰

#### è©•ä¾¡è»¸
1. **æŠ€è¡“çš„ä¾¡å€¤**
   - ç²¾åº¦å‘ä¸Šã®å¯èƒ½æ€§
   - å‡¦ç†åŠ¹ç‡ã®æ”¹å–„
   - ä¿å®ˆæ€§ã®å‘ä¸Š

2. **ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤**
   - æ„æ€æ±ºå®šæ”¯æ´ã®å¼·åŒ–
   - é‹ç”¨åŠ¹ç‡ã®å‘ä¸Š
   - ã‚³ã‚¹ãƒˆå‰Šæ¸›åŠ¹æœ

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤**
   - ä½¿ã„ã‚„ã™ã•ã®å‘ä¸Š
   - ä¿¡é ¼æ€§ã®å‘ä¸Š
   - å­¦ç¿’ã‚³ã‚¹ãƒˆã®å‰Šæ¸›

#### å„ªå…ˆé †ä½ä»˜ã‘
```
å½±éŸ¿åº¦ Ã— å®Ÿç¾å¯èƒ½æ€§ = å„ªå…ˆåº¦

é«˜å½±éŸ¿ Ã— é«˜å®Ÿç¾æ€§ = æœ€å„ªå…ˆ
é«˜å½±éŸ¿ Ã— ä½å®Ÿç¾æ€§ = ä¸­æœŸæ¤œè¨
ä½å½±éŸ¿ Ã— é«˜å®Ÿç¾æ€§ = ä½™è£•æ™‚å¯¾å¿œ
```

### Phase 3: è¨­è¨ˆãƒ»å®Ÿè£…ï¼ˆå››åŠæœŸï¼‰

#### è¨­è¨ˆåŸå‰‡
1. **æ®µéšçš„æ”¹å–„**: ä¸€åº¦ã«å…¨ã¦ã‚’å¤‰ãˆãªã„
2. **äº’æ›æ€§ä¿æŒ**: æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿æœ€å°åŒ–
3. **æ¤œè¨¼å¯èƒ½æ€§**: æ”¹å–„åŠ¹æœã®æ¸¬å®šå¯èƒ½æ€§
4. **å¯é€†æ€§**: å¿…è¦æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½æ€§

#### å®Ÿè£…æ‰‹é †
1. **ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—é–‹ç™º**: å°è¦æ¨¡ã§ã®æ¤œè¨¼
2. **A/Bãƒ†ã‚¹ãƒˆ**: æ–°æ—§æ–¹å¼ã®æ¯”è¼ƒ
3. **æ®µéšçš„å±•é–‹**: ãƒªã‚¹ã‚¯ã‚’æŠ‘ãˆãŸå°å…¥
4. **åŠ¹æœæ¸¬å®š**: å®šé‡çš„ãƒ»å®šæ€§çš„è©•ä¾¡

### Phase 4: è©•ä¾¡ãƒ»å­¦ç¿’ï¼ˆç¶™ç¶šçš„ï¼‰

#### è©•ä¾¡æŒ‡æ¨™
```
æŠ€è¡“æŒ‡æ¨™:
- è¨ˆç®—ç²¾åº¦ã®å‘ä¸Šåº¦
- å‡¦ç†æ€§èƒ½ã®å¤‰åŒ–
- ã‚¨ãƒ©ãƒ¼ç‡ã®å¤‰åŒ–

ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™:
- æ„æ€æ±ºå®šé€Ÿåº¦ã®å‘ä¸Š
- é‹ç”¨å·¥æ•°ã®å‰Šæ¸›
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦

å­¦ç¿’æŒ‡æ¨™:
- æ–°ãŸãªå•é¡Œã®ç™ºè¦‹æ•°
- æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢ã®å‰µå‡ºæ•°
- ãƒŠãƒ¬ãƒƒã‚¸ã®è“„ç©åº¦
```

## ğŸ¨ å…·ä½“çš„æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢

### çŸ­æœŸæ”¹å–„ï¼ˆ3ãƒ¶æœˆä»¥å†…ï¼‰

#### 1. è¨ˆç®—å‰æã®æ˜ç¢ºåŒ–
```
ç¾çŠ¶: 670æ™‚é–“ã®æ„å‘³ãŒä¸æ˜ç¢º
æ”¹å–„: æœŸé–“ãƒ»äººæ•°ãƒ»ç¯„å›²ã‚’æ˜ç¤º
å®Ÿè£…: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ç”»é¢è¡¨ç¤ºã®æ”¹å–„
```

#### 2. æ¥­å‹™å®Ÿæ…‹èª¿æŸ»
```
ç¾çŠ¶: 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆãŒå‰æ
æ”¹å–„: å®Ÿéš›ã®æ¥­å‹™æ™‚é–“åˆ†å¸ƒã‚’èª¿æŸ»
å®Ÿè£…: èª¿æŸ»ãƒ•ã‚©ãƒ¼ãƒ ãƒ»åˆ†æãƒ„ãƒ¼ãƒ«ä½œæˆ
```

### ä¸­æœŸæ”¹å–„ï¼ˆ6ãƒ¶æœˆä»¥å†…ï¼‰

#### 1. å¤šæ¬¡å…ƒè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
```
ç¾çŠ¶: æ™‚é–“ã®ã¿ã®å˜æ¬¡å…ƒè©•ä¾¡
æ”¹å–„: ã‚¹ã‚­ãƒ«Ã—æ™‚é–“Ã—é‡è¦åº¦ã®å¤šæ¬¡å…ƒè©•ä¾¡
å®Ÿè£…: è©•ä¾¡ãƒãƒˆãƒªã‚¯ã‚¹ãƒ»é‡ã¿ä»˜ã‘ã‚¨ãƒ³ã‚¸ãƒ³
```

#### 2. å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ 
```
ç¾çŠ¶: å›ºå®š30åˆ†ã‚¹ãƒ­ãƒƒãƒˆ
æ”¹å–„: æ¥­å‹™ç‰¹æ€§ã«å¿œã˜ãŸå¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆ
å®Ÿè£…: å‹•çš„ã‚¹ãƒ­ãƒƒãƒˆé•·æ±ºå®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
```

### é•·æœŸæ”¹å–„ï¼ˆ1å¹´ä»¥å†…ï¼‰

#### 1. äºˆæ¸¬åˆ†ææ©Ÿèƒ½
```
ç¾çŠ¶: éå»ãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆã®ã¿
æ”¹å–„: å°†æ¥éœ€è¦ã®äºˆæ¸¬åˆ†æ
å®Ÿè£…: æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ãƒ»äºˆæ¸¬ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```

#### 2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æœ€é©åŒ–
```
ç¾çŠ¶: é™çš„ãªåˆ†æçµæœ
æ”¹å–„: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®é…ç½®æœ€é©åŒ–
å®Ÿè£…: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ãƒ»æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³
```

## ğŸ“ˆ æˆåŠŸæŒ‡æ¨™ãƒ»KPI

### æ”¹å–„æ´»å‹•ã®KPI

#### é‡çš„æŒ‡æ¨™
- **æ”¹å–„ææ¡ˆæ•°**: æœˆé–“XXä»¶ä»¥ä¸Š
- **å®Ÿè£…ç‡**: ææ¡ˆã®50%ä»¥ä¸Šã‚’å®Ÿè£…
- **åŠ¹æœæ¸¬å®š**: å…¨å®Ÿè£…æ”¹å–„ã®åŠ¹æœæ¸¬å®šå®Ÿæ–½

#### è³ªçš„æŒ‡æ¨™
- **å‰µé€ æ€§**: å¾“æ¥ç™ºæƒ³ã‚’è¶…ãˆãŸæ”¹å–„
- **å®Ÿç”¨æ€§**: ç¾å ´ã§å®Ÿéš›ã«æ´»ç”¨ã•ã‚Œã‚‹æ”¹å–„
- **æŒç¶šæ€§**: ç¶™ç¶šçš„ã«ä¾¡å€¤ã‚’ç”Ÿã‚€æ”¹å–„

### ã‚·ã‚¹ãƒ†ãƒ å“è³ªã®KPI

#### ç²¾åº¦å‘ä¸Š
- **è¨ˆç®—ç²¾åº¦**: èª¤å·®ç‡ã®ç¶™ç¶šçš„å‰Šæ¸›
- **äºˆæ¸¬ç²¾åº¦**: äºˆæ¸¬ã¨å®Ÿç¸¾ã®ä¹–é›¢æœ€å°åŒ–
- **é©åˆæ€§**: ç¾å ´å®Ÿæ…‹ã¨ã®æ•´åˆæ€§å‘ä¸Š

#### åŠ¹ç‡å‘ä¸Š
- **å‡¦ç†é€Ÿåº¦**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã®æ”¹å–„
- **é‹ç”¨åŠ¹ç‡**: ç®¡ç†å·¥æ•°ã®å‰Šæ¸›
- **å­¦ç¿’åŠ¹ç‡**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¿’å¾—æ™‚é–“çŸ­ç¸®

## ğŸ¤ ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®å½¹å‰²

### é–‹ç™ºãƒãƒ¼ãƒ 
- **æŠ€è¡“çš„å®Ÿç¾å¯èƒ½æ€§**ã®è©•ä¾¡
- **ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—é–‹ç™º**ãƒ»æ¤œè¨¼
- **å“è³ªä¿è¨¼**ãƒ»ãƒ†ã‚¹ãƒˆå®Ÿæ–½

### é‹ç”¨ãƒãƒ¼ãƒ 
- **ç¾å ´ã§ã®èª²é¡Œç™ºè¦‹**
- **æ”¹å–„åŠ¹æœã®æ¸¬å®š**
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆ**ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†

### ç®¡ç†å±¤
- **æˆ¦ç•¥çš„æ–¹å‘æ€§**ã®æ±ºå®š
- **ãƒªã‚½ãƒ¼ã‚¹é…åˆ†**ã®åˆ¤æ–­
- **æŠ•è³‡å¯¾åŠ¹æœ**ã®è©•ä¾¡

### ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **å®Ÿç”¨æ€§ã®è©•ä¾¡**
- **æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢**ã®æä¾›
- **æ–°æ©Ÿèƒ½ã®å—å®¹æ€§**ãƒ†ã‚¹ãƒˆ

## ğŸ”„ æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«ã®é‹ç”¨

### æ—¥æ¬¡æ´»å‹•
- ã€Œãªãœï¼Ÿã€ã®å•ã„ã‹ã‘
- å°ã•ãªæ”¹å–„æ©Ÿä¼šã®ç™ºè¦‹
- å­¦ç¿’ãƒ»æ°—ã¥ãã®è¨˜éŒ²

### é€±æ¬¡æ´»å‹•
- ãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç¢ºèª
- æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢ã®æ•´ç†

### æœˆæ¬¡æ´»å‹•
- æ”¹å–„ææ¡ˆã®è©•ä¾¡ãƒ»å„ªå…ˆé †ä½ä»˜ã‘
- å®Ÿè£…æ¸ˆã¿æ”¹å–„ã®åŠ¹æœæ¸¬å®š
- æ¬¡æœˆæ”¹å–„è¨ˆç”»ã®ç­–å®š

### å››åŠæœŸæ´»å‹•
- å¤§è¦æ¨¡æ”¹å–„ã®è¨­è¨ˆãƒ»å®Ÿè£…
- æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è‡ªä½“ã®è¦‹ç›´ã—
- é•·æœŸæˆ¦ç•¥ã®èª¿æ•´

## ğŸ¯ æˆåŠŸã¸ã®å¿ƒæ§‹ãˆ

### åŸºæœ¬ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆ
1. **å®Œç’§ã‚’ç›®æŒ‡ã•ãªã„**: å°ã•ãªæ”¹å–„ã®ç©ã¿é‡ã­
2. **å¤±æ•—ã‚’æã‚Œãªã„**: å®Ÿé¨“ãƒ»å­¦ç¿’ã«ã‚ˆã‚‹æˆé•·
3. **ç¾çŠ¶ã«æº€è¶³ã—ãªã„**: å¸¸ã«ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã‚’æ¢æ±‚
4. **å”åŠ›ã‚’é‡è¦–ã™ã‚‹**: ãƒãƒ¼ãƒ å…¨ä½“ã§ã®æ”¹å–„æ´»å‹•

### ç¶™ç¶šã®ã‚³ãƒ„
- **å°ã•ãå§‹ã‚ã‚‹**: å¤§ããªå¤‰åŒ–ã‚ˆã‚Šã‚‚å°ã•ãªç¶™ç¶š
- **è¦‹ãˆã‚‹åŒ–ã™ã‚‹**: æ”¹å–„åŠ¹æœã‚’å¯è¦–åŒ–ãƒ»å…±æœ‰
- **ç¥ã†ãƒ»èªã‚ã‚‹**: æ”¹å–„æ´»å‹•ã¸ã®è©•ä¾¡ãƒ»æ„Ÿè¬
- **ä»•çµ„ã¿åŒ–ã™ã‚‹**: å€‹äººä¾å­˜ã‹ã‚‰çµ„ç¹”çš„æ´»å‹•ã¸

## ğŸ“ æ”¹å–„ææ¡ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### ææ¡ˆæ›¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```markdown
# æ”¹å–„ææ¡ˆ: [ã‚¿ã‚¤ãƒˆãƒ«]

## ç¾çŠ¶ã®èª²é¡Œ
- å…·ä½“çš„ãªå•é¡Œãƒ»åˆ¶ç´„
- å½±éŸ¿ç¯„å›²ãƒ»é‡è¦åº¦

## æ”¹å–„æ¡ˆ
- ææ¡ˆã™ã‚‹è§£æ±ºæ–¹æ³•
- æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

## å®Ÿè£…æ–¹æ³•
- æŠ€è¡“çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹
- å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

## è©•ä¾¡æ–¹æ³•
- æˆåŠŸæŒ‡æ¨™ãƒ»KPI
- æ¸¬å®šæ–¹æ³•ãƒ»é »åº¦

## ãƒªã‚¹ã‚¯ãƒ»è€ƒæ…®äº‹é …
- æƒ³å®šã•ã‚Œã‚‹ãƒªã‚¹ã‚¯
- å¯¾ç­–ãƒ»ä»£æ›¿æ¡ˆ
```

---

**ç¶™ç¶šçš„æ”¹å–„ã¯æ°¸ç¶šçš„ãªæ—…è·¯ã§ã™ã€‚**  
**ç›®çš„åœ°ã§ã¯ãªãã€æ­©ã¿ç¶šã‘ã‚‹ã“ã¨ã«ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚**

**å…±ã«ã€ã‚ˆã‚Šè‰¯ã„ã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚ˆã‚Šè‰¯ã„æœªæ¥ã‚’å‰µé€ ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚**

---
*æœ¬ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯å®Ÿè·µã‚’é€šã˜ã¦ç¶™ç¶šçš„ã«æ”¹å–„ã•ã‚Œã¾ã™ã€‚*

**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
"""

    def _generate_api_spec(self) -> str:
        """APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ä»•æ§˜æ›¸ç”Ÿæˆ"""
        
        return f"""# APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ä»•æ§˜æ›¸

**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: Shift-Suite Phase 2/3.1  
**API ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆæ—¥**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸ“‹ æ¦‚è¦

æœ¬æ–‡æ›¸ã¯ã€Shift-Suiteã‚·ã‚¹ãƒ†ãƒ å†…ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨APIä»•æ§˜ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

## ğŸŒŠ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Excel     â”‚â”€â”€â”€â–¶â”‚  io_excel   â”‚â”€â”€â”€â–¶â”‚ long_df     â”‚
â”‚ å‹¤å‹™ãƒ‡ãƒ¼ã‚¿   â”‚    â”‚ èª­ã¿è¾¼ã¿     â”‚    â”‚ æ­£è¦åŒ–      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ Phase 3.1   â”‚â—€â”€â”€â”€â”‚   Phase 2   â”‚â—€â”€â”€â”€â”€â”€â”˜
â”‚LightWeight  â”‚    â”‚FactExtractorâ”‚
â”‚AnomalyDet   â”‚    â”‚Prototype    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚FactBook     â”‚â”€â”€â”€â–¶â”‚DashFactBook â”‚â”€â”€â”€â–¶â”‚  dash_app   â”‚
â”‚Visualizer   â”‚    â”‚Integration  â”‚    â”‚ WebUI       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä»•æ§˜

### 1. å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆExcelï¼‰

#### å¿…é ˆåˆ—
```json
{{
  "date": "å‹¤å‹™æ—¥ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰",
  "staff_id": "è·å“¡IDï¼ˆæ–‡å­—åˆ—ï¼‰",
  "start_time": "é–‹å§‹æ™‚é–“ï¼ˆHH:MMå½¢å¼ï¼‰",
  "end_time": "çµ‚äº†æ™‚é–“ï¼ˆHH:MMå½¢å¼ï¼‰",
  "work_type": "å‹¤å‹™ã‚¿ã‚¤ãƒ—ï¼ˆæ—¥å‹¤/å¤œå‹¤ç­‰ï¼‰",
  "department": "éƒ¨ç½²ãƒ»ç—…æ£Ÿï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"
}}
```

#### ãƒ‡ãƒ¼ã‚¿ä¾‹
```csv
date,staff_id,start_time,end_time,work_type,department
2024-08-01,STAFF001,09:00,17:00,æ—¥å‹¤,å†…ç§‘ç—…æ£Ÿ
2024-08-01,STAFF002,17:00,09:00,å¤œå‹¤,å†…ç§‘ç—…æ£Ÿ
```

### 2. ä¸­é–“ãƒ‡ãƒ¼ã‚¿ï¼ˆlong_dfï¼‰

#### parsed_slots_countï¼ˆé‡è¦ï¼‰
```python
# ãƒ‡ãƒ¼ã‚¿å‹: int
# æ„å‘³: 30åˆ†å˜ä½ã®ã‚¹ãƒ­ãƒƒãƒˆæ•°
# ä¾‹: 8æ™‚é–“å‹¤å‹™ = 16ã‚¹ãƒ­ãƒƒãƒˆ
parsed_slots_count = 16

# æ™‚é–“å¤‰æ›ï¼ˆPhase 2/3.1ã§å®Ÿæ–½ï¼‰
SLOT_HOURS = 0.5
actual_hours = parsed_slots_count * SLOT_HOURS  # 16 * 0.5 = 8.0æ™‚é–“
```

### 3. å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿

#### shortage_summary.txt
```
total_lack_hours: 670
total_excess_hours: 505
```

## ğŸ”§ Phase 2 APIä»•æ§˜

### FactExtractorPrototype

#### ã‚¯ãƒ©ã‚¹å®šç¾©
```python
class FactExtractorPrototype:
    def __init__(self, config: Dict[str, Any])
    def extract_facts(self, data: pd.DataFrame) -> Dict[str, Any]
    def calculate_hours(self, slots_data: pd.Series) -> pd.Series
```

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

##### calculate_hours()
```python
def calculate_hours(self, slots_data: pd.Series) -> pd.Series:
    \"\"\"ã‚¹ãƒ­ãƒƒãƒˆæ•°ã‚’æ™‚é–“ã«å¤‰æ›\"\"\"
    SLOT_HOURS = 0.5
    return slots_data * SLOT_HOURS  # ä¿®æ­£æ¸ˆã¿: æ­£ç¢ºãªå¤‰æ›
```

#### é‡è¦ãªä¿®æ­£ç‚¹
```python
# ä¿®æ­£å‰ï¼ˆèª¤ã‚Šï¼‰
total_hours = group['parsed_slots_count'].sum()  # ã‚¹ãƒ­ãƒƒãƒˆæ•°ã‚’ãã®ã¾ã¾æ™‚é–“æ‰±ã„

# ä¿®æ­£å¾Œï¼ˆæ­£ç¢ºï¼‰
total_hours = group['parsed_slots_count'].sum() * SLOT_HOURS  # æ­£ã—ã„æ™‚é–“å¤‰æ›
```

## ğŸ” Phase 3.1 APIä»•æ§˜

### LightweightAnomalyDetector

#### ã‚¯ãƒ©ã‚¹å®šç¾©
```python
class LightweightAnomalyDetector:
    def __init__(self, config: Dict[str, Any])
    def detect_anomalies(self, data: pd.DataFrame) -> Dict[str, Any]
    def calculate_monthly_hours(self, work_data: pd.DataFrame) -> pd.DataFrame
```

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

##### calculate_monthly_hours()
```python
def calculate_monthly_hours(self, work_data: pd.DataFrame) -> pd.DataFrame:
    \"\"\"æœˆæ¬¡åŠ´åƒæ™‚é–“è¨ˆç®—\"\"\"
    SLOT_HOURS = 0.5
    monthly_hours = work_data.groupby(['staff', 'year_month'])['parsed_slots_count'].sum() * SLOT_HOURS
    return monthly_hours
```

## ğŸ¨ çµ±åˆãƒ¬ã‚¤ãƒ¤ãƒ¼ API

### FactBookVisualizer

#### æ©Ÿèƒ½
- Phase 2/3.1ã®çµæœã‚’å¯è¦–åŒ–ç”¨ã«å¤‰æ›
- ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ
- ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ç”¨ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢

#### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```python
class FactBookVisualizer:
    def create_heatmap_data(self, facts: Dict) -> Dict
    def create_timeline_data(self, facts: Dict) -> Dict
    def create_summary_stats(self, facts: Dict) -> Dict
```

### DashFactBookIntegration

#### æ©Ÿèƒ½
- Dash Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®çµ±åˆ
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–UIç”¨ãƒ‡ãƒ¼ã‚¿æä¾›
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°å¯¾å¿œ

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```python
@app.callback(...)
def update_heatmap(selected_date):
    # FactBookVisualizerã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
    # Dash ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ã«å¤‰æ›
    return updated_figure

@app.callback(...)
def update_summary(filters):
    # æ¡ä»¶ã«åŸºã¥ã„ãŸé›†è¨ˆ
    # ã‚µãƒãƒªãƒ¼æƒ…å ±ã®æ›´æ–°
    return summary_data
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿å¤‰æ›ä»•æ§˜

### 1. Excel â†’ long_df

#### å¤‰æ›å‡¦ç†
```python
def excel_to_longdf(excel_path: str) -> pd.DataFrame:
    \"\"\"Excelå‹¤å‹™ãƒ‡ãƒ¼ã‚¿ã‚’æ­£è¦åŒ–å½¢å¼ã«å¤‰æ›\"\"\"
    
    # 1. Excelãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
    raw_data = pd.read_excel(excel_path)
    
    # 2. æ™‚é–“è¨ˆç®—ï¼ˆ30åˆ†ã‚¹ãƒ­ãƒƒãƒˆï¼‰
    def calculate_slots(start_time: str, end_time: str) -> int:
        # é–‹å§‹ãƒ»çµ‚äº†æ™‚åˆ»ã‹ã‚‰ã‚¹ãƒ­ãƒƒãƒˆæ•°ã‚’è¨ˆç®—
        duration_minutes = get_duration_minutes(start_time, end_time)
        return duration_minutes // 30  # 30åˆ†å˜ä½ã®ã‚¹ãƒ­ãƒƒãƒˆ
    
    # 3. parsed_slots_countåˆ—ç”Ÿæˆ
    raw_data['parsed_slots_count'] = raw_data.apply(
        lambda row: calculate_slots(row['start_time'], row['end_time']), 
        axis=1
    )
    
    return raw_data
```

### 2. long_df â†’ Phase 2/3.1

#### Phase 2å¤‰æ›
```python
def process_phase2(data: pd.DataFrame) -> Dict[str, Any]:
    \"\"\"Phase 2ãƒ•ã‚¡ã‚¯ãƒˆæŠ½å‡º\"\"\"
    SLOT_HOURS = 0.5
    
    # ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥é›†è¨ˆï¼ˆæ™‚é–“å˜ä½ã«å¤‰æ›ï¼‰
    group_stats = data.groupby(['department', 'work_type']).agg({{
        'parsed_slots_count': ['count', 'sum', 'mean']
    }})
    
    # ã‚¹ãƒ­ãƒƒãƒˆæ•°ã‚’æ™‚é–“ã«å¤‰æ›
    group_stats['total_hours'] = group_stats['parsed_slots_count']['sum'] * SLOT_HOURS
    
    return group_stats.to_dict()
```

#### Phase 3.1å¤‰æ›
```python
def process_phase31(data: pd.DataFrame) -> Dict[str, Any]:
    \"\"\"Phase 3.1ç•°å¸¸æ¤œçŸ¥\"\"\"
    SLOT_HOURS = 0.5
    
    # æœˆæ¬¡åŠ´åƒæ™‚é–“è¨ˆç®—
    monthly_hours = data.groupby(['staff', 'year_month'])['parsed_slots_count'].sum() * SLOT_HOURS
    
    # ç•°å¸¸æ¤œçŸ¥ï¼ˆéåŠ´åƒç­‰ï¼‰
    anomalies = monthly_hours[monthly_hours > 160]  # æœˆ160æ™‚é–“è¶…é
    
    return {{
        'monthly_hours': monthly_hours.to_dict(),
        'anomalies': anomalies.to_dict()
    }}
```

## ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼

#### ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚¨ãƒ©ãƒ¼
```python
class DataFormatError(Exception):
    \"\"\"ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒä¸æ­£ãªå ´åˆ\"\"\"
    pass

# ä½¿ç”¨ä¾‹
try:
    parsed_slots = calculate_slots(start_time, end_time)
except ValueError as e:
    raise DataFormatError(f"æ™‚åˆ»å½¢å¼ãŒä¸æ­£: {{e}}")
```

#### è¨ˆç®—ã‚¨ãƒ©ãƒ¼
```python
class CalculationError(Exception):
    \"\"\"è¨ˆç®—å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ\"\"\"
    pass

# SLOT_HOURSæœªå®šç¾©ã‚¨ãƒ©ãƒ¼
try:
    hours = slots * SLOT_HOURS
except NameError:
    raise CalculationError("SLOT_HOURSå®šæ•°ãŒæœªå®šç¾©")
```

### API ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

#### æˆåŠŸæ™‚
```json
{{
  "status": "success",
  "data": {{
    "total_hours": 670.0,
    "processed_records": 1234,
    "calculation_method": "slots * SLOT_HOURS"
  }},
  "metadata": {{
    "timestamp": "2024-08-03T18:30:00Z",
    "version": "1.0"
  }}
}}
```

#### ã‚¨ãƒ©ãƒ¼æ™‚
```json
{{
  "status": "error",
  "error": {{
    "code": "CALCULATION_ERROR",
    "message": "SLOT_HOURSå®šæ•°ãŒæœªå®šç¾©",
    "details": {{
      "file": "fact_extractor_prototype.py",
      "line": 123
    }}
  }},
  "metadata": {{
    "timestamp": "2024-08-03T18:30:00Z",
    "version": "1.0"
  }}
}}
```

## ğŸ” ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°

### ãƒ­ã‚°å‡ºåŠ›ä»•æ§˜

#### Phase 2ãƒ­ã‚°
```python
import logging

logger = logging.getLogger('phase2.fact_extractor')

def extract_facts(self, data):
    logger.info(f"å‡¦ç†é–‹å§‹: {{len(data)}}ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰")
    
    # SLOT_HOURSä½¿ç”¨ãƒ­ã‚°
    SLOT_HOURS = 0.5
    logger.debug(f"SLOT_HOURSå®šæ•°: {{SLOT_HOURS}}")
    
    total_hours = group['parsed_slots_count'].sum() * SLOT_HOURS
    logger.debug(f"æ™‚é–“å¤‰æ›: {{group['parsed_slots_count'].sum()}}ã‚¹ãƒ­ãƒƒãƒˆ â†’ {{total_hours}}æ™‚é–“")
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¿½è·¡
```python
# å„æ®µéšã§ã®ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
def validate_data_flow():
    \"\"\"ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®æ•´åˆæ€§æ¤œè¨¼\"\"\"
    
    # 1. å…¥åŠ›ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
    assert 'parsed_slots_count' in data.columns
    assert data['parsed_slots_count'].dtype == 'int64'
    
    # 2. å¤‰æ›çµæœæ¤œè¨¼
    hours = data['parsed_slots_count'] * SLOT_HOURS
    assert hours.dtype == 'float64'
    assert (hours >= 0).all()
    
    # 3. å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
    assert 'total_hours' in result
    assert isinstance(result['total_hours'], (int, float))
```

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜

### å‡¦ç†æ€§èƒ½è¦ä»¶

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“
- **Phase 2å‡¦ç†**: 1000ä»¶ã‚ãŸã‚Š < 1ç§’
- **Phase 3.1å‡¦ç†**: 1000ä»¶ã‚ãŸã‚Š < 0.5ç§’
- **çµ±åˆå‡¦ç†**: ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ < 5ç§’

#### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- **åŸºæœ¬å‡¦ç†**: < 100MB
- **å¤§é‡ãƒ‡ãƒ¼ã‚¿**: < 500MB
- **ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯**: ãªã—ï¼ˆã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

#### ãƒ‡ãƒ¼ã‚¿é‡å¯¾å¿œ
```python
# å¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼ˆãƒãƒ£ãƒ³ã‚¯å‡¦ç†ï¼‰
def process_large_dataset(data: pd.DataFrame, chunk_size: int = 1000):
    \"\"\"å¤§é‡ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ£ãƒ³ã‚¯å˜ä½ã§å‡¦ç†\"\"\"
    
    results = []
    for chunk in data.groupby(data.index // chunk_size):
        chunk_result = process_chunk(chunk[1])
        results.append(chunk_result)
    
    return combine_results(results)
```

---
*æœ¬APIä»•æ§˜æ›¸ã¯å®Ÿè£…å¤‰æ›´ã«ä¼´ã„ç¶™ç¶šçš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚*

**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
"""

    def _generate_troubleshooting_guide(self) -> str:
        """ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ç”Ÿæˆ"""
        
        return f"""# ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

**å¯¾è±¡**: é‹ç”¨æ‹…å½“è€…ãƒ»ã‚µãƒãƒ¼ãƒˆæ‹…å½“è€…  
**ã‚·ã‚¹ãƒ†ãƒ **: Shift-Suite Phase 2/3.1  
**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸš¨ ç·Šæ€¥å¯¾å¿œï¼ˆCritical ãƒ¬ãƒ™ãƒ«ï¼‰

### 1. ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“åœæ­¢

#### ç—‡çŠ¶
- Dashã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ãªã„
- å…¨ã¦ã®æ©Ÿèƒ½ãŒåˆ©ç”¨ä¸å¯

#### åŸå› èª¿æŸ»
```bash
# 1. ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep python
ps aux | grep dash

# 2. ãƒãƒ¼ãƒˆç¢ºèª
netstat -tulpn | grep :8050

# 3. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
tail -f logs/*.log
```

#### å¯¾å‡¦æ‰‹é †
```bash
# 1. ãƒ—ãƒ­ã‚»ã‚¹å¼·åˆ¶çµ‚äº†
pkill -f dash_app.py
pkill -f app.py

# 2. ã‚·ã‚¹ãƒ†ãƒ å†èµ·å‹•
python3 dash_app.py &

# 3. å‹•ä½œç¢ºèª
curl http://localhost:8050/
```

### 2. é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«æ¬ æ

#### ç—‡çŠ¶
- "No module named" ã‚¨ãƒ©ãƒ¼
- ImportError ãŒå¤šç™º

#### ç¢ºèªæ‰‹é †
```bash
# é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
ls -la shift_suite/tasks/fact_extractor_prototype.py
ls -la shift_suite/tasks/lightweight_anomaly_detector.py
```

#### å¾©æ—§æ‰‹é †
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§
BACKUP_DIR=$(ls -td COMPLETE_BACKUP_* | head -1)
echo "æœ€æ–°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: $BACKUP_DIR"

cp "$BACKUP_DIR/shift_suite/tasks/fact_extractor_prototype.py" shift_suite/tasks/
cp "$BACKUP_DIR/shift_suite/tasks/lightweight_anomaly_detector.py" shift_suite/tasks/

# æ•´åˆæ€§ç¢ºèª
python3 A3_LIGHTWEIGHT_MONITORING.py
```

### 3. SLOT_HOURSè¨ˆç®—ã‚¨ãƒ©ãƒ¼

#### ç—‡çŠ¶
- è¨ˆç®—çµæœãŒ2å€ã«ãªã‚‹
- "NameError: name 'SLOT_HOURS' is not defined"

#### è¨ºæ–­æ‰‹é †
```bash
# SLOT_HOURSä½¿ç”¨ç®‡æ‰€ç¢ºèª
grep -n "SLOT_HOURS" shift_suite/tasks/fact_extractor_prototype.py
grep -n "SLOT_HOURS" shift_suite/tasks/lightweight_anomaly_detector.py

# æœŸå¾…å€¤: Phase 2 = 4ç®‡æ‰€ä»¥ä¸Š, Phase 3.1 = 1ç®‡æ‰€ä»¥ä¸Š
```

#### ä¿®æ­£æ‰‹é †
```python
# ä¸è¶³ã—ã¦ã„ã‚‹å ´åˆã®ä¿®æ­£ä¾‹
# ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã«å®šæ•°è¿½åŠ 
SLOT_HOURS = 0.5

# è¨ˆç®—ç®‡æ‰€ã‚’ä¿®æ­£
# ä¿®æ­£å‰
total_hours = group['parsed_slots_count'].sum()
# ä¿®æ­£å¾Œ  
total_hours = group['parsed_slots_count'].sum() * SLOT_HOURS
```

## âš ï¸ é«˜å„ªå…ˆåº¦å•é¡Œï¼ˆHigh ãƒ¬ãƒ™ãƒ«ï¼‰

### 1. è¨ˆç®—çµæœã®ç•°å¸¸

#### ç—‡çŠ¶
- 670æ™‚é–“ã‹ã‚‰å¤§å¹…ã«ä¹–é›¢ã—ãŸå€¤
- è² ã®å€¤ãŒå‡ºåŠ›ã•ã‚Œã‚‹
- ç•°å¸¸ã«å¤§ããªå€¤ï¼ˆ1000æ™‚é–“è¶…ç­‰ï¼‰

#### è¨ºæ–­æ‰‹é †
```bash
# 1. ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯
python3 A3_DATA_QUALITY_MONITOR_FIXED.py

# 2. è¨ˆç®—éç¨‹ã®ç¢ºèª
python3 B1_QUALITY_ASSURANCE_FRAMEWORK.py

# 3. å…ƒãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
head -20 [Excelãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹]
```

#### åŸå› åˆ¥å¯¾å‡¦

##### å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å•é¡Œ
```python
# ã‚ˆãã‚ã‚‹å•é¡Œ
# 1. æ™‚åˆ»å½¢å¼ã®ä¸æ•´åˆ
"9:00" vs "09:00"  # ã‚¼ãƒ­ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã®é•ã„

# 2. æ—¥ä»˜è·¨ãã®å¤œå‹¤
start: "22:00", end: "06:00"  # ç¿Œæ—¥6æ™‚ã¾ã§

# 3. æ¬ æå€¤ãƒ»ç•°å¸¸å€¤
start: "", end: "17:00"  # é–‹å§‹æ™‚åˆ»ãŒç©º
```

##### è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å•é¡Œ
```python
# SLOT_HOURSä¹—ç®—ã®æ¬ è½ç¢ºèª
def check_calculation():
    # Phase 2ç¢ºèª
    with open('shift_suite/tasks/fact_extractor_prototype.py') as f:
        content = f.read()
        slot_hours_count = content.count('* SLOT_HOURS')
        if slot_hours_count < 4:
            print(f"âš ï¸ Phase 2ã®SLOT_HOURSä½¿ç”¨ãŒä¸è¶³: {slot_hours_count}/4")
    
    # Phase 3.1ç¢ºèª
    with open('shift_suite/tasks/lightweight_anomaly_detector.py') as f:
        content = f.read()
        slot_hours_count = content.count('* SLOT_HOURS')
        if slot_hours_count < 1:
            print(f"âš ï¸ Phase 3.1ã®SLOT_HOURSä½¿ç”¨ãŒä¸è¶³: {slot_hours_count}/1")
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–

#### ç—‡çŠ¶
- å‡¦ç†æ™‚é–“ãŒç•°å¸¸ã«é•·ã„ï¼ˆ10ç§’ä»¥ä¸Šï¼‰
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æ€¥å¢—
- ã‚·ã‚¹ãƒ†ãƒ ã®å¿œç­”æ€§ä½ä¸‹

#### è¨ºæ–­æ‰‹é †
```bash
# 1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
python3 A3_SIMPLE_PERFORMANCE_MONITOR.py

# 2. ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
top -p $(pgrep -f dash_app.py)
free -h
df -h

# 3. ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°
python3 -m cProfile -s cumulative your_script.py
```

#### å¯¾å‡¦æ–¹æ³•

##### ãƒ‡ãƒ¼ã‚¿é‡ã®å•é¡Œ
```python
# å¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
def process_with_chunks(data, chunk_size=1000):
    results = []
    for i in range(0, len(data), chunk_size):
        chunk = data[i:i+chunk_size]
        result = process_chunk(chunk)
        results.append(result)
    return combine_results(results)
```

##### ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®å¯¾å‡¦
```python
# ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å¼·åˆ¶å®Ÿè¡Œ
import gc
gc.collect()

# ä¸è¦ãªå¤‰æ•°ã®å‰Šé™¤
del large_dataframe
```

## ğŸ“Š ä¸­å„ªå…ˆåº¦å•é¡Œï¼ˆMedium ãƒ¬ãƒ™ãƒ«ï¼‰

### 1. ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚¨ãƒ©ãƒ¼

#### ç—‡çŠ¶
- "ValueError: time data does not match format"
- "KeyError: 'parsed_slots_count'"
- Excelãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å¤±æ•—

#### å¯¾å‡¦æ‰‹é †

##### æ™‚åˆ»å½¢å¼ã®çµ±ä¸€
```python
def standardize_time_format(time_str):
    \"\"\"æ™‚åˆ»å½¢å¼ã‚’çµ±ä¸€\"\"\"
    try:
        # å„ç¨®å½¢å¼ã«å¯¾å¿œ
        for fmt in ['%H:%M', '%H:%M:%S', '%I:%M %p']:
            try:
                return datetime.strptime(time_str, fmt).strftime('%H:%M')
            except ValueError:
                continue
        raise ValueError(f"ä¸æ˜ãªæ™‚åˆ»å½¢å¼: {time_str}")
    except Exception as e:
        return "00:00"  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
```

##### åˆ—åã®ç¢ºèªãƒ»ä¿®æ­£
```python
def validate_excel_columns(df):
    \"\"\"å¿…é ˆåˆ—ã®ç¢ºèª\"\"\"
    required_columns = ['date', 'staff_id', 'start_time', 'end_time']
    missing_columns = [col for col in required_columns if col not in df.columns]
    
    if missing_columns:
        print(f"ä¸è¶³ã—ã¦ã„ã‚‹åˆ—: {missing_columns}")
        # åˆ—åã®ãƒãƒƒãƒ”ãƒ³ã‚°ææ¡ˆ
        suggest_column_mapping(df.columns, required_columns)
```

### 2. è¨­å®šãƒ»ç’°å¢ƒå•é¡Œ

#### ç—‡çŠ¶
- "ModuleNotFoundError: No module named 'pandas'"
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸æ•´åˆ
- ç’°å¢ƒå¤‰æ•°æœªè¨­å®š

#### å¯¾å‡¦æ‰‹é †
```bash
# 1. ä¾å­˜é–¢ä¿‚ç¢ºèª
pip list | grep pandas
pip list | grep numpy

# 2. ä¸è¶³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# 3. ç’°å¢ƒå¤‰æ•°ç¢ºèª
echo $PYTHONPATH
echo $PATH
```

## ğŸ”§ ä½å„ªå…ˆåº¦å•é¡Œï¼ˆLow ãƒ¬ãƒ™ãƒ«ï¼‰

### 1. è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### ã‚ˆãã‚ã‚‹è­¦å‘Š
```
FutureWarning: The default value of numeric_only in DataFrame.sum
SettingWithCopyWarning: A value is trying to be set on a copy
```

#### å¯¾å‡¦æ–¹æ³•
```python
# FutureWarningå¯¾å‡¦
total = df.sum(numeric_only=True)

# SettingWithCopyWarningå¯¾å‡¦
df = df.copy()
df['new_column'] = values
```

### 2. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«è‚¥å¤§åŒ–

#### å¯¾å‡¦æ‰‹é †
```bash
# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç¢ºèª
du -h logs/*.log

# å¤ã„ãƒ­ã‚°ã®åœ§ç¸®ãƒ»å‰Šé™¤
find logs/ -name "*.log" -mtime +7 -exec gzip {{}} \\;
find logs/ -name "*.log.gz" -mtime +30 -delete
```

## ğŸ› ï¸ è¨ºæ–­ãƒ„ãƒ¼ãƒ«

### 1. åŒ…æ‹¬çš„ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```python
#!/usr/bin/env python3
# health_check.py
import subprocess
import sys
from pathlib import Path

def run_health_check():
    \"\"\"ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯\"\"\"
    
    checks = [
        ("ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç›£è¦–", "python3 A3_LIGHTWEIGHT_MONITORING.py"),
        ("ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª", "python3 A3_SIMPLE_ERROR_LOG_MONITOR.py"),
        ("ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª", "python3 A3_SIMPLE_PERFORMANCE_MONITOR.py"),
        ("ãƒ‡ãƒ¼ã‚¿å“è³ªç¢ºèª", "python3 A3_DATA_QUALITY_MONITOR_FIXED.py"),
        ("å“è³ªä¿è¨¼ãƒ†ã‚¹ãƒˆ", "python3 B1_QUALITY_ASSURANCE_FRAMEWORK.py")
    ]
    
    results = []
    for name, command in checks:
        try:
            result = subprocess.run(command.split(), 
                                  capture_output=True, 
                                  text=True, 
                                  timeout=60)
            status = "âœ… OK" if result.returncode == 0 else "âŒ NG"
            results.append(f"{name}: {status}")
        except Exception as e:
            results.append(f"{name}: âŒ ã‚¨ãƒ©ãƒ¼ - {e}")
    
    return results

if __name__ == "__main__":
    results = run_health_check()
    for result in results:
        print(result)
```

### 2. è¨­å®šç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
#!/usr/bin/env python3
# config_check.py

def check_configuration():
    \"\"\"è¨­å®šãƒ»ç’°å¢ƒã®ç¢ºèª\"\"\"
    
    print("ğŸ”§ è¨­å®šãƒ»ç’°å¢ƒç¢ºèª")
    print("=" * 40)
    
    # 1. Pythonç’°å¢ƒ
    print(f"Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³: {sys.version}")
    
    # 2. é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«
    critical_files = [
        "shift_suite/tasks/fact_extractor_prototype.py",
        "shift_suite/tasks/lightweight_anomaly_detector.py",
        "dash_app.py",
        "app.py"
    ]
    
    for file_path in critical_files:
        path = Path(file_path)
        status = "âœ… å­˜åœ¨" if path.exists() else "âŒ ä¸åœ¨"
        print(f"{file_path}: {status}")
    
    # 3. SLOT_HOURSä½¿ç”¨ç¢ºèª
    try:
        with open("shift_suite/tasks/fact_extractor_prototype.py") as f:
            content = f.read()
            count = content.count("* SLOT_HOURS")
            print(f"Phase 2 SLOT_HOURSä½¿ç”¨: {count}ç®‡æ‰€ {'âœ…' if count >= 4 else 'âš ï¸'}")
        
        with open("shift_suite/tasks/lightweight_anomaly_detector.py") as f:
            content = f.read()
            count = content.count("* SLOT_HOURS")
            print(f"Phase 3.1 SLOT_HOURSä½¿ç”¨: {count}ç®‡æ‰€ {'âœ…' if count >= 1 else 'âš ï¸'}")
    except Exception as e:
        print(f"SLOT_HOURSç¢ºèªã‚¨ãƒ©ãƒ¼: {e}")
```

## ğŸ“ ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †

### ãƒ¬ãƒ™ãƒ«1: è‡ªå·±è§£æ±ºï¼ˆ15åˆ†ä»¥å†…ï¼‰
1. æœ¬ã‚¬ã‚¤ãƒ‰ã®è©²å½“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª
2. åŸºæœ¬çš„ãªè¨ºæ–­ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
3. ç°¡å˜ãªå†èµ·å‹•ãƒ»ãƒªã‚»ãƒƒãƒˆ

### ãƒ¬ãƒ™ãƒ«2: ãƒãƒ¼ãƒ å†…ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1æ™‚é–“ä»¥å†…ï¼‰
1. è©³ç´°ãªãƒ­ã‚°ãƒ»è¨¼è·¡ã®åé›†
2. çŠ¶æ³ã®è©³ç´°è¨˜éŒ²
3. ãƒãƒ¼ãƒ å†…ã§ã®ç›¸è«‡ãƒ»è§£æ±º

### ãƒ¬ãƒ™ãƒ«3: ä¸Šä½ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ4æ™‚é–“ä»¥å†…ï¼‰
1. åŒ…æ‹¬çš„ãªå½±éŸ¿ç¯„å›²èª¿æŸ»
2. æš«å®šå¯¾ç­–ã®å®Ÿæ–½
3. æ ¹æœ¬åŸå› åˆ†æã®é–‹å§‹

### ãƒ¬ãƒ™ãƒ«4: ç·Šæ€¥å¯¾å¿œï¼ˆå³åº§ï¼‰
1. ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢åˆ¤æ–­
2. ç·Šæ€¥é€£çµ¡å…ˆã¸ã®å ±å‘Š
3. ç½å®³å¾©æ—§æ‰‹é †ã®å®Ÿè¡Œ

## ğŸ“‹ å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### æ—¥æ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
python3 health_check.py

# ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
find logs/ -name "*.log" -size +10M -exec logrotate {{}} \\;
```

### é€±æ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
```bash
# åŒ…æ‹¬çš„å“è³ªãƒã‚§ãƒƒã‚¯
python3 A3_DATA_QUALITY_MONITOR_FIXED.py

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
python3 A3_SIMPLE_PERFORMANCE_MONITOR.py
```

### æœˆæ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¤œè¨¼
python3 config_check.py

# ç¶™ç¶šçš„æ”¹å–„ãƒ¬ãƒ“ãƒ¥ãƒ¼
# â†’ é‹ç”¨ä¸Šã®èª²é¡Œãƒ»æ”¹å–„ææ¡ˆã®æ•´ç†
```

---
*æœ¬ã‚¬ã‚¤ãƒ‰ã¯å®Ÿéš›ã®ãƒˆãƒ©ãƒ–ãƒ«äº‹ä¾‹ã«åŸºã¥ãç¶™ç¶šçš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚*

**ç·Šæ€¥æ™‚é€£çµ¡å…ˆ**: [ã‚µãƒãƒ¼ãƒˆçª“å£æƒ…å ±]  
**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
"""

    def _generate_design_philosophy(self) -> str:
        """è¨­è¨ˆæ€æƒ³ãƒ»å“²å­¦æ›¸ç”Ÿæˆ"""
        
        return f"""# è¨­è¨ˆæ€æƒ³ãƒ»å“²å­¦æ›¸

**å¯¾è±¡**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãƒ»ä¸Šç´šé–‹ç™ºè€…  
**ã‚·ã‚¹ãƒ†ãƒ **: Shift-Suite Phase 2/3.1  
**ä½œæˆæ—¥**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}

## ğŸ¯ æ ¹æœ¬æ€æƒ³

### æ ¸å¿ƒçš„ãªè¨­è¨ˆå“²å­¦

> **ã€Œæ•°å€¤ã‚’çµ¶å¯¾è¦–ã›ãšã€å¸¸ã«ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã‚’è¿½æ±‚ã™ã‚‹ã€**

ã“ã®æ€æƒ³ã¯ã€Phase 2/3.1ã‚·ã‚¹ãƒ†ãƒ ã®å…¨ã¦ã®è¨­è¨ˆåˆ¤æ–­ã®åŸºç¤ã¨ãªã£ã¦ã„ã¾ã™ã€‚

### å“²å­¦çš„åŸå‰‡

#### 1. è¬™è™šæ€§ï¼ˆHumilityï¼‰
- ç¾åœ¨ã®å®Ÿè£…ã¯ã€Œä¸€ã¤ã®è§£ã€ã§ã‚ã‚Šã€Œå”¯ä¸€ã®è§£ã€ã§ã¯ãªã„
- 670æ™‚é–“ã¯ã€Œè¨ˆç®—çµæœã€ã§ã‚ã‚Šã€Œçµ¶å¯¾çš„çœŸå®Ÿã€ã§ã¯ãªã„
- å¸¸ã«æ”¹å–„ä½™åœ°ãŒã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹

#### 2. æ¢æ±‚æ€§ï¼ˆCuriosityï¼‰
- ã€Œãªãœã“ã®å€¤ãªã®ã‹ï¼Ÿã€ã‚’å•ã„ç¶šã‘ã‚‹
- å‰ææ¡ä»¶ã‚’å®šæœŸçš„ã«ç–‘ã„ã€æ¤œè¨¼ã™ã‚‹
- ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã®å¯èƒ½æ€§ã‚’æ¢ç´¢ã—ç¶šã‘ã‚‹

#### 3. æ¼¸é€²æ€§ï¼ˆIncrementalismï¼‰
- å¤§å¹…ãªå¤‰æ›´ã‚ˆã‚Šå°ã•ãªç¶™ç¶šçš„æ”¹å–„
- ç ´å£Šçš„å¤‰æ›´ã‚ˆã‚Šã‚‚äº’æ›æ€§ã‚’ä¿ã£ãŸé€²åŒ–
- å®Ÿé¨“ãƒ»å­¦ç¿’ãƒ»æ”¹å–„ã®ã‚µã‚¤ã‚¯ãƒ«

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆåŸå‰‡

### 1. åˆ†é›¢ãƒ»ç‹¬ç«‹æ€§ï¼ˆSeparation of Concernsï¼‰

#### Phaseåˆ†é›¢ã®æ„å›³
```
Phase 2: FactExtractorPrototype
  â†“ æ˜ç¢ºãªè²¬ä»»åˆ†ç•Œ
Phase 3.1: LightweightAnomalyDetector
  â†“ ç–çµåˆãªçµ±åˆ
çµ±åˆå±¤: FactBookVisualizer â†’ DashApp
```

**è¨­è¨ˆæ„å›³**:
- å„Phaseã®ç‹¬ç«‹ã—ãŸé€²åŒ–
- ãƒ†ã‚¹ãƒˆãƒ»ä¿å®ˆãƒ»æ”¹å–„ã®å®¹æ˜“æ€§
- éšœå®³ã®å±€æ‰€åŒ–

#### è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢
```python
# å®šæ•°å®šç¾©ã®ä¸€å…ƒåŒ–
SLOT_HOURS = 0.5  # 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆ = 0.5æ™‚é–“

# å„Phaseã§ã®ä½¿ç”¨
total_hours = slots * SLOT_HOURS  # çµ±ä¸€ã—ãŸè¨ˆç®—æ–¹æ³•
```

**è¨­è¨ˆæ„å›³**:
- è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸€è²«æ€§
- å¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²ã®æ˜ç¢ºåŒ–
- ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ã®å˜ç´”åŒ–

### 2. é€æ˜æ€§ãƒ»å¯è¦³æ¸¬æ€§ï¼ˆObservabilityï¼‰

#### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®å¯è¦–åŒ–
```
Excelå…¥åŠ› â†’ io_excel â†’ long_df â†’ Phase2/3.1 â†’ çµ±åˆ â†’ å‡ºåŠ›
     â†“         â†“        â†“         â†“        â†“      â†“
   [ãƒ­ã‚°]   [æ¤œè¨¼]   [å¤‰æ›]    [è¨ˆç®—]   [çµ±åˆ]  [å‡ºåŠ›]
```

**è¨­è¨ˆæ„å›³**:
- å„æ®µéšã§ã®çŠ¶æ…‹æŠŠæ¡
- å•é¡Œç™ºç”Ÿæ™‚ã®è¿…é€Ÿãªç‰¹å®š
- æ”¹å–„åŠ¹æœã®å®šé‡çš„æ¸¬å®š

#### åŒ…æ‹¬çš„ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
```
A3.1.1: ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç›£è¦–
A3.1.2: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–  
A3.1.3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
A3.1.4: ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
A3.2:   ãƒ‡ãƒ¼ã‚¿å“è³ªç›£è¦–
```

**è¨­è¨ˆæ„å›³**:
- ãƒ—ãƒ­ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå•é¡Œç™ºè¦‹
- ç¶™ç¶šçš„ãªå“è³ªä¿è¨¼
- æ”¹å–„æ©Ÿä¼šã®ä½“ç³»çš„ç™ºè¦‹

### 3. é©å¿œæ€§ãƒ»æ‹¡å¼µæ€§ï¼ˆAdaptabilityï¼‰

#### è¨­å®šé§†å‹•è¨­è¨ˆ
```python
# è¨­å®šã«ã‚ˆã‚‹æŸ”è»Ÿæ€§
config = {{
    "SLOT_HOURS": 0.5,        # å°†æ¥: 15åˆ†(0.25)ã€å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆå¯¾å¿œ
    "aggregation_method": "sum",  # å°†æ¥: é‡ã¿ä»˜ã‘åˆè¨ˆå¯¾å¿œ
    "quality_weights": {{         # å°†æ¥: è³ªçš„è©•ä¾¡å¯¾å¿œ
        "skill_factor": 1.0,
        "experience_factor": 1.0
    }}
}}
```

**è¨­è¨ˆæ„å›³**:
- ã‚³ãƒ¼ãƒ‰å¤‰æ›´ãªã—ã§ã®èª¿æ•´
- A/Bãƒ†ã‚¹ãƒˆãƒ»å®Ÿé¨“ã®æ”¯æ´
- æ®µéšçš„ç§»è¡Œã®å¯èƒ½æ€§

#### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ
```python
# æ‹¡å¼µå¯èƒ½ãªåˆ†æã‚¨ãƒ³ã‚¸ãƒ³
class AnalysisEngine:
    def __init__(self):
        self.analyzers = []
    
    def register_analyzer(self, analyzer):
        self.analyzers.append(analyzer)
    
    def analyze(self, data):
        results = []
        for analyzer in self.analyzers:
            result = analyzer.process(data)
            results.append(result)
        return combine_results(results)
```

**è¨­è¨ˆæ„å›³**:
- æ–°ã—ã„åˆ†ææ‰‹æ³•ã®è¿½åŠ å®¹æ˜“æ€§
- æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿æœ€å°åŒ–
- ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¿ƒé€²

## ğŸ¤” é‡è¦ãªè¨­è¨ˆåˆ¤æ–­ã¨ãã®æ ¹æ‹ 

### 1. 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆã®æ¡ç”¨

#### åˆ¤æ–­
å…¨æ¥­å‹™ã‚’30åˆ†å˜ä½ã§è©•ä¾¡ã™ã‚‹

#### æ ¹æ‹ 
- **å®Ÿç”¨æ€§**: å¤šãã®åŒ»ç™‚æ¥­å‹™ãŒ30åˆ†ç¨‹åº¦
- **ç°¡æ½”æ€§**: è¨ˆç®—ãƒ»ç†è§£ãŒå®¹æ˜“
- **æ—¢å­˜æ…£ç¿’**: æ¥­ç•Œã§ä¸€èˆ¬çš„

#### èªè­˜ã—ã¦ã„ã‚‹åˆ¶ç´„
- **æŸ”è»Ÿæ€§ã®æ¬ å¦‚**: 15åˆ†æ¥­å‹™ã€2æ™‚é–“æ¥­å‹™ã¸ã®å¯¾å¿œä¸è¶³
- **ç²¾åº¦ã®åˆ¶ç´„**: å®Ÿéš›ã®æ¥­å‹™æ™‚é–“ã¨ã®ä¹–é›¢
- **æ”¹å–„å¯èƒ½æ€§**: å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆã€æ¥­å‹™åˆ¥ã‚¹ãƒ­ãƒƒãƒˆé•·

#### å°†æ¥ã®ç™ºå±•æ–¹å‘
```python
# ç¾åœ¨: å›ºå®šã‚¹ãƒ­ãƒƒãƒˆ
SLOT_HOURS = 0.5

# å°†æ¥: å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆ
def calculate_dynamic_slot_hours(task_type, time_of_day):
    slot_mapping = {{
        "vital_check": 0.25,     # 15åˆ†
        "meal_assistance": 0.5,   # 30åˆ†  
        "surgery": 2.0,          # 2æ™‚é–“
        "conference": 1.0        # 1æ™‚é–“
    }}
    return slot_mapping.get(task_type, 0.5)
```

### 2. SLOT_HOURSä¹—ç®—ã®æ˜ç¤ºåŒ–

#### åˆ¤æ–­
`parsed_slots_count * SLOT_HOURS` ã®æ˜ç¤ºçš„ãªè¨˜è¿°

#### æ ¹æ‹ 
- **æ˜ç¢ºæ€§**: å¤‰æ›å‡¦ç†ã®å¯è¦–åŒ–
- **ä¿å®ˆæ€§**: ä¿®æ­£ãƒ»å¤‰æ›´ã®å®¹æ˜“æ€§
- **æ¤œè¨¼æ€§**: ãƒ†ã‚¹ãƒˆãƒ»ç›£è¦–ã®ç°¡æ½”æ€§

#### ä»£æ›¿æ¡ˆã®æ¤œè¨
```python
# ä»£æ›¿æ¡ˆ1: æš—é»™çš„å¤‰æ›ï¼ˆæ¡ç”¨ã›ãšï¼‰
def get_hours(slots):
    return slots / 2  # æš—é»™çš„ã«30åˆ†å‰æ

# ä»£æ›¿æ¡ˆ2: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åŒ–ï¼ˆå°†æ¥æ¤œè¨ï¼‰
SLOT_DURATION_MINUTES = config.get('slot_duration', 30)
SLOT_HOURS = SLOT_DURATION_MINUTES / 60

# æ¡ç”¨æ¡ˆ: æ˜ç¤ºçš„å®šæ•°ï¼ˆç¾åœ¨ï¼‰
SLOT_HOURS = 0.5
hours = slots * SLOT_HOURS  # æ„å›³ãŒæ˜ç¢º
```

#### è¨­è¨ˆæ„å›³
- **å¯èª­æ€§**: ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€äººãŒç†è§£ã—ã‚„ã™ã„
- **å¤‰æ›´å®¹æ˜“æ€§**: SLOT_HOURSã‚’å¤‰æ›´ã™ã‚Œã°å…¨ä½“ã«åæ˜ 
- **ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§**: å„å¤‰æ›ãƒã‚¤ãƒ³ãƒˆã§ã®æ¤œè¨¼å¯èƒ½

### 3. 670æ™‚é–“ã®ç›¸å¯¾åŒ–

#### åˆ¤æ–­
670æ™‚é–“ã‚’ã€Œç¾åœ¨ã®è¨ˆç®—çµæœã€ã¨ã—ã¦æ‰±ã„ã€çµ¶å¯¾è¦–ã—ãªã„

#### æ ¹æ‹ 
- **è¬™è™šæ€§**: ç¾åœ¨ã®æ–¹æ³•ãŒæœ€å–„ã¨ã¯é™ã‚‰ãªã„
- **æ”¹å–„å¯èƒ½æ€§**: ã‚ˆã‚Šè‰¯ã„è¨ˆç®—æ–¹æ³•ãŒã‚ã‚Šå¾—ã‚‹
- **æ–‡è„ˆä¾å­˜æ€§**: æœŸé–“ãƒ»ç¯„å›²ã«ã‚ˆã‚Šæ„å‘³ãŒå¤‰ã‚ã‚‹

#### å…·ä½“çš„å®Ÿè£…
```python
# ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé¿ã‘ã‚‹ã¹ãï¼‰
EXPECTED_SHORTAGE = 670  # å›ºå®šå€¤ã¨ã—ã¦æ‰±ã†
if actual_shortage != EXPECTED_SHORTAGE:
    raise ValueError("åŸºæº–å€¤ã¨ä¸ä¸€è‡´")

# æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
def interpret_shortage_hours(hours, period, staff_count, context):
    \"\"\"ä¸è¶³æ™‚é–“ã‚’æ–‡è„ˆã§è§£é‡ˆ\"\"\"
    per_person_per_day = hours / (period * staff_count)
    
    return {{
        "total_hours": hours,
        "per_person_per_day": per_person_per_day,
        "interpretation": get_interpretation(per_person_per_day),
        "baseline_comparison": compare_with_baseline(hours, context)
    }}
```

## ğŸ”¬ å“è³ªä¿è¨¼ã®è¨­è¨ˆæ€æƒ³

### 1. ãƒ†ã‚¹ãƒˆã®å“²å­¦

#### ã€Œç¾çŠ¶ç¶­æŒã€ã‹ã‚‰ã€Œç¶™ç¶šçš„æ”¹å–„ã€ã¸
```python
# å¾“æ¥å‹ãƒ†ã‚¹ãƒˆ: ç¾çŠ¶ã®æ­£ã—ã•ã®ã¿ç¢ºèª
def test_calculation():
    assert calculate_hours(16) == 8.0  # å›ºå®šå€¤ãƒã‚§ãƒƒã‚¯

# æ”¹å–„å‹ãƒ†ã‚¹ãƒˆ: ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã®æ¢ç´¢
def test_calculation_with_improvement():
    # ç¾çŠ¶ã®æ­£ã—ã•ç¢ºèª
    assert calculate_hours(16) == 8.0
    
    # æ”¹å–„æ©Ÿä¼šã®æ¢ç´¢
    improvement_opportunities = find_calculation_improvements()
    assert len(improvement_opportunities) > 0
    
    # ä»£æ›¿æ–¹æ³•ã®è©•ä¾¡
    alternative_methods = evaluate_alternative_calculations()
    document_improvement_opportunities(alternative_methods)
```

#### ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒªã®è¨­è¨ˆ
- **Unit**: åŸºæœ¬è¨ˆç®—ã®æ­£ç¢ºæ€§
- **Integration**: Phaseé–“é€£æºã®æ•´åˆæ€§
- **Regression**: ä¿®æ­£ã®ç¶­æŒç¢ºèª
- **Assumption**: å‰ææ¡ä»¶ã®å¦¥å½“æ€§æ¤œè¨¼
- **Improvement**: æ”¹å–„æ©Ÿä¼šã®ç™ºè¦‹

### 2. ç›£è¦–ã®å“²å­¦

#### ãƒ—ãƒ­ã‚¢ã‚¯ãƒ†ã‚£ãƒ–å“è³ªä¿è¨¼
```python
# ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ç›£è¦–ï¼ˆå¾“æ¥ï¼‰
if error_occurred:
    alert("ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ")

# ãƒ—ãƒ­ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ç›£è¦–ï¼ˆæ¨å¥¨ï¼‰
quality_score = assess_data_quality()
if quality_score < threshold:
    investigate_improvement_opportunities()
    suggest_preventive_measures()
```

#### å¤šå±¤é˜²å¾¡
```
Layer 1: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ï¼ˆA3.1.1ã€œA3.1.4ï¼‰
Layer 2: å“è³ªåˆ†æï¼ˆA3.2ï¼‰
Layer 3: è‡ªå‹•ãƒ†ã‚¹ãƒˆï¼ˆB1ï¼‰
Layer 4: ç¶™ç¶šçš„æ”¹å–„ï¼ˆæ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼‰
```

## ğŸŒ± é€²åŒ–ã®æˆ¦ç•¥

### çŸ­æœŸé€²åŒ–ï¼ˆ3ãƒ¶æœˆï¼‰
- **å‰æã®æ˜ç¢ºåŒ–**: 670æ™‚é–“ã®æ–‡è„ˆå®šç¾©
- **å®Ÿæ…‹èª¿æŸ»**: 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆã®å¦¥å½“æ€§æ¤œè¨¼
- **ç›£è¦–å¼·åŒ–**: å“è³ªæŒ‡æ¨™ã®ç¶™ç¶šæ¸¬å®š

### ä¸­æœŸé€²åŒ–ï¼ˆ6ãƒ¶æœˆï¼‰
- **å¤šæ¬¡å…ƒè©•ä¾¡**: ã‚¹ã‚­ãƒ«Ã—æ™‚é–“Ã—é‡è¦åº¦
- **å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆ**: æ¥­å‹™ç‰¹æ€§åˆ¥ã‚¹ãƒ­ãƒƒãƒˆé•·
- **äºˆæ¸¬æ©Ÿèƒ½**: éœ€è¦äºˆæ¸¬ãƒ»æœ€é©åŒ–ææ¡ˆ

### é•·æœŸé€²åŒ–ï¼ˆ1å¹´ï¼‰
- **AIçµ±åˆ**: æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹æœ€é©åŒ–
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: å³åº§ã®çŠ¶æ³æŠŠæ¡ãƒ»å¯¾å¿œ
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŒ–**: ä»–ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ

### é€²åŒ–ã®åŸå‰‡
1. **éç ´å£Šçš„é€²åŒ–**: æ—¢å­˜æ©Ÿèƒ½ã¨ã®äº’æ›æ€§ä¿æŒ
2. **æ®µéšçš„å°å…¥**: ãƒªã‚¹ã‚¯ã‚’æŠ‘ãˆãŸæ¼¸é€²çš„å¤‰æ›´
3. **å®Ÿè¨¼ãƒ™ãƒ¼ã‚¹**: ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãæ„æ€æ±ºå®š
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸­å¿ƒ**: ç¾å ´ã®ä¾¡å€¤å‰µé€ ã‚’æœ€å„ªå…ˆ

## ğŸ“š æŠ€è¡“çš„è² å‚µã®ç®¡ç†

### èªè­˜ã—ã¦ã„ã‚‹æŠ€è¡“çš„è² å‚µ

#### 1. å›ºå®šã‚¹ãƒ­ãƒƒãƒˆé•·ã®åˆ¶ç´„
```python
# ç¾åœ¨ã®åˆ¶ç´„
SLOT_HOURS = 0.5  # å›ºå®šå€¤

# å°†æ¥ã®ç†æƒ³
def get_slot_hours(task_type, context):
    return calculate_optimal_slot_hours(task_type, context)
```

#### 2. è³ªçš„è©•ä¾¡ã®ä¸åœ¨
```python
# ç¾åœ¨ã®åˆ¶ç´„  
hours = slots * SLOT_HOURS  # é‡çš„ã®ã¿

# å°†æ¥ã®ç†æƒ³
value = calculate_weighted_value(slots, skill_level, urgency, complexity)
```

#### 3. æ–‡è„ˆæƒ…å ±ã®ä¸è¶³
```python
# ç¾åœ¨ã®åˆ¶ç´„
total_hours = 670  # æ•°å€¤ã®ã¿

# å°†æ¥ã®ç†æƒ³
context_aware_analysis = {{
    "total_hours": 670,
    "period": "monthly",
    "staff_count": 20,
    "facility_type": "acute_care",
    "per_person_impact": 33.5,
    "industry_comparison": "above_average",
    "improvement_potential": "15% reduction possible"
}}
```

### è² å‚µè¿”æ¸ˆæˆ¦ç•¥

#### å„ªå…ˆé †ä½ä»˜ã‘
1. **å½±éŸ¿åº¦å¤§Ã—è§£æ±ºå®¹æ˜“**: æ–‡è„ˆæƒ…å ±ã®è¿½åŠ 
2. **å½±éŸ¿åº¦å¤§Ã—è§£æ±ºå›°é›£**: å¤šæ¬¡å…ƒè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
3. **å½±éŸ¿åº¦å°Ã—è§£æ±ºå®¹æ˜“**: UIã®å¾®èª¿æ•´
4. **å½±éŸ¿åº¦å°Ã—è§£æ±ºå›°é›£**: å°†æ¥ã®æŠ€è¡“é©æ–°å¾…ã¡

#### æ®µéšçš„è¿”æ¸ˆ
```python
# Phase 1: æƒ…å ±ã®è¿½åŠ ï¼ˆ3ãƒ¶æœˆï¼‰
def add_context_information():
    return {{
        "calculation_method": "slots * SLOT_HOURS",
        "assumptions": ["30min_slots", "equal_weighting"],
        "limitations": ["no_skill_factor", "no_urgency_factor"]
    }}

# Phase 2: è¨ˆç®—ã®å¤šæ§˜åŒ–ï¼ˆ6ãƒ¶æœˆï¼‰
def introduce_alternative_calculations():
    return {{
        "basic_hours": calculate_basic_hours(),
        "weighted_hours": calculate_weighted_hours(),
        "quality_adjusted_hours": calculate_quality_adjusted_hours()
    }}

# Phase 3: ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆï¼ˆ12ãƒ¶æœˆï¼‰
def integrate_comprehensive_system():
    return unified_workforce_optimization_system()
```

## ğŸ¯ æˆåŠŸæŒ‡æ¨™

### æŠ€è¡“çš„æˆåŠŸ
- **ç²¾åº¦å‘ä¸Š**: è¨ˆç®—èª¤å·®ã®ç¶™ç¶šçš„å‰Šæ¸›
- **æ€§èƒ½å‘ä¸Š**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ãƒ»å‡¦ç†åŠ¹ç‡ã®æ”¹å–„
- **ä¿å®ˆæ€§å‘ä¸Š**: å¤‰æ›´ãƒ»æ‹¡å¼µã®å®¹æ˜“æ€§

### ãƒ“ã‚¸ãƒã‚¹æˆåŠŸ
- **æ„æ€æ±ºå®šæ”¯æ´**: ã‚ˆã‚Šè‰¯ã„çµŒå–¶åˆ¤æ–­ã¸ã®è²¢çŒ®
- **é‹ç”¨åŠ¹ç‡**: äººå“¡é…ç½®æœ€é©åŒ–ã®åŠ¹æœ
- **ãƒªã‚¹ã‚¯è»½æ¸›**: åŠ´å‹™ãƒªã‚¹ã‚¯ã®äºˆé˜²ãƒ»è»½æ¸›

### æ–‡åŒ–çš„æˆåŠŸ
- **å­¦ç¿’æ–‡åŒ–**: ç¶™ç¶šçš„æ”¹å–„ã®å®šç€
- **æ¢æ±‚ç²¾ç¥**: ã€Œãªãœï¼Ÿã€ã‚’å•ã†æ–‡åŒ–
- **è¬™è™šã•**: ç¾çŠ¶ã«æº€è¶³ã—ãªã„å§¿å‹¢

## ğŸ”„ ã“ã®æ–‡æ›¸ã®é€²åŒ–

### æ›´æ–°æ–¹é‡
- **å®Ÿè£…å¤‰æ›´**: è¨­è¨ˆåˆ¤æ–­ã®å¤‰æ›´æ™‚ã«æ›´æ–°
- **å­¦ç¿’åæ˜ **: æ–°ãŸãªçŸ¥è¦‹ãƒ»çµŒé¨“ã®åæ˜ 
- **å“²å­¦æ·±åŒ–**: ã‚ˆã‚Šæ·±ã„ç†è§£ã«åŸºã¥ãæ”¹è¨‚

### èª­è€…ã¨ã®å¯¾è©±
ã“ã®æ–‡æ›¸ã¯ä¸€æ–¹çš„ãªèª¬æ˜ã§ã¯ãªãã€èª­è€…ã¨ã®å¯¾è©±ã‚’æ„å›³ã—ã¦ã„ã¾ã™ï¼š

- **ç–‘å•ã®æ­“è¿**: è¨­è¨ˆåˆ¤æ–­ã¸ã®ç–‘å•ãƒ»ç•°è«–
- **æ”¹å–„ææ¡ˆ**: ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã®ææ¡ˆ
- **çµŒé¨“å…±æœ‰**: å®Ÿè£…ãƒ»é‹ç”¨ã§ã®å­¦ã³

---

**ã“ã®è¨­è¨ˆæ€æƒ³ã¯å›ºå®šã•ã‚ŒãŸã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**  
**ç¶™ç¶šçš„ãªå¯¾è©±ã¨æ”¹å–„ã«ã‚ˆã‚Šã€ã‚ˆã‚Šè‰¯ã„æ€æƒ³ã¸ã¨é€²åŒ–ã—ç¶šã‘ã¾ã™ã€‚**

**è¨­è¨ˆã¯æ°¸ç¶šçš„ãªæ—…è·¯ã§ã‚ã‚Šã€æœ€çµ‚çš„ãªåˆ°é”ç‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**  
**å…±ã«ã€ã‚ˆã‚Šè‰¯ã„ã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚ˆã‚Šè‰¯ã„æ€æƒ³ã‚’è¿½æ±‚ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚**

---
*æœ¬æ–‡æ›¸ã¯å®Ÿè£…çµŒé¨“ã¨å“²å­¦çš„è€ƒå¯Ÿã«åŸºã¥ãç¶™ç¶šçš„ã«æ·±åŒ–ã•ã‚Œã¾ã™ã€‚*

**æœ€çµ‚æ›´æ–°**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
"""

    def _evaluate_documentation_quality(self, documents: List[Dict[str, Any]]) -> Dict[str, Any]:
        """ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå“è³ªè©•ä¾¡"""
        
        total_docs = len(documents)
        successful_docs = len([d for d in documents if d.get("status") == "success"])
        
        total_words = sum(d.get("word_count", 0) for d in documents if d.get("status") == "success")
        avg_words = total_words / successful_docs if successful_docs > 0 else 0
        
        quality_metrics = {
            "completion_rate": successful_docs / total_docs if total_docs > 0 else 0,
            "total_documents": total_docs,
            "successful_documents": successful_docs,
            "total_word_count": total_words,
            "average_word_count": avg_words,
            "coverage_areas": [
                "æŠ€è¡“ä»•æ§˜",
                "é‹ç”¨æ‰‹é †", 
                "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰",
                "ç¶™ç¶šçš„æ”¹å–„",
                "APIä»•æ§˜",
                "ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°",
                "è¨­è¨ˆæ€æƒ³"
            ]
        }
        
        # å“è³ªè©•ä¾¡
        if quality_metrics["completion_rate"] >= 0.9:
            quality_metrics["overall_quality"] = "excellent"
        elif quality_metrics["completion_rate"] >= 0.7:
            quality_metrics["overall_quality"] = "good"
        else:
            quality_metrics["overall_quality"] = "needs_improvement"
            
        return quality_metrics
    
    def generate_documentation_report(self, results: Dict[str, Any]) -> str:
        """ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ"""
        
        report = f"""
ğŸ“š **B2 åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ãƒ¬ãƒãƒ¼ãƒˆ**
å®Ÿè¡Œæ—¥æ™‚: {results['timestamp']}

ğŸ“Š **ç”Ÿæˆçµæœã‚µãƒãƒªãƒ¼**
- ç·ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°: {results['quality_metrics']['total_documents']}
- ç”ŸæˆæˆåŠŸ: {results['quality_metrics']['successful_documents']}
- å®Œäº†ç‡: {results['quality_metrics']['completion_rate']:.1%}
- ç·èªæ•°: {results['quality_metrics']['total_word_count']:,}èª

ğŸ“‹ **ç”Ÿæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§**"""

        for doc in results["documents_generated"]:
            if doc["status"] == "success":
                report += f"""
\n**{doc['name']}**
- ğŸ“ ãƒ‘ã‚¹: `{doc['file_path']}`
- ğŸ¯ å¯¾è±¡: {doc['target_audience']}
- ğŸ“ èªæ•°: {doc['word_count']:,}èª
- ğŸ’¡ ç›®çš„: {doc['purpose']}"""
            else:
                report += f"""
\n**{doc['name']}** âŒ
- ã‚¨ãƒ©ãƒ¼: {doc.get('error', 'ä¸æ˜')}"""

        report += f"""

ğŸ¯ **ã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æ**
ä»¥ä¸‹ã®é‡è¦é ˜åŸŸã‚’ã‚«ãƒãƒ¼:"""
        
        for area in results['quality_metrics']['coverage_areas']:
            report += f"\n- âœ… {area}"

        report += f"""

ğŸ’­ **é‡è¦ãªæ´å¯Ÿ**"""
        
        for insight in results["insights"]:
            report += f"\nâ€¢ {insight}"

        report += f"""

ğŸ“ˆ **å“è³ªè©•ä¾¡**
- å…¨ä½“å“è³ª: {results['quality_metrics']['overall_quality']}
- æ–‡æ›¸ã®ç¶²ç¾…æ€§: {'âœ… å„ªç§€' if results['quality_metrics']['completion_rate'] >= 0.9 else 'âš ï¸ æ”¹å–„ä½™åœ°ã‚ã‚Š'}
- å¹³å‡æ–‡æ›¸é‡: {results['quality_metrics']['average_word_count']:.0f}èª/æ–‡æ›¸

ğŸ¨ **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨­è¨ˆæ€æƒ³**
ã€Œæƒ…å ±ä¼é”ã‹ã‚‰çŸ¥è­˜å‰µé€ ã¸ã€

1. **éšå±¤çš„ç†è§£**: æŠ€è¡“è€…ã‹ã‚‰çµŒå–¶å±¤ã¾ã§å¯¾å¿œ
2. **å®Ÿç”¨çš„ä¾¡å€¤**: èª­ã‚€ã ã‘ã§ãªãä½¿ãˆã‚‹å†…å®¹
3. **ç¶™ç¶šçš„é€²åŒ–**: é™çš„è¨˜éŒ²ã‹ã‚‰å‹•çš„ãªçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã¸
4. **æ‰¹åˆ¤çš„æ€è€ƒ**: 670æ™‚é–“ã‚’çµ¶å¯¾è¦–ã—ãªã„å§¿å‹¢ã®æµ¸é€

ğŸ”„ **ä»Šå¾Œã®å±•é–‹**
- ğŸ“– **åˆ©ç”¨ä¿ƒé€²**: ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã¸ã®å‘¨çŸ¥ãƒ»æ´»ç”¨æ¨é€²
- ğŸ”„ **ç¶™ç¶šæ›´æ–°**: å®Ÿè£…å¤‰æ›´ãƒ»çŸ¥è¦‹è“„ç©ã«åŸºã¥ãæ”¹è¨‚
- ğŸ’¬ **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†**: åˆ©ç”¨è€…ã‹ã‚‰ã®æ”¹å–„ææ¡ˆåé›†
- ğŸŒŸ **å“è³ªå‘ä¸Š**: ã‚ˆã‚Šä¾¡å€¤ã®é«˜ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®é€²åŒ–"""
        
        return report
    
    def save_documentation_results(self, results: Dict[str, Any]) -> str:
        """ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆçµæœä¿å­˜"""
        
        result_file = self.docs_dir / f"documentation_report_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
        
        with open(result_file, 'w', encoding='utf-8') as f:
            json.dump(results, f, indent=2, ensure_ascii=False)
        
        return str(result_file)

def main():
    """ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œ"""
    
    try:
        doc_system = DocumentationSystem()
        
        # 1. å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
        results = doc_system.generate_all_documentation()
        
        # 2. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ»è¡¨ç¤º
        print("\n" + "=" * 80)
        print("ğŸ“‹ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ãƒ¬ãƒãƒ¼ãƒˆ")
        print("=" * 80)
        
        report = doc_system.generate_documentation_report(results)
        print(report)
        
        # 3. çµæœä¿å­˜
        result_file = doc_system.save_documentation_results(results)
        print(f"\nğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™çµæœä¿å­˜: {result_file}")
        
        # 4. æˆåŠŸåˆ¤å®š
        success = results["quality_metrics"]["completion_rate"] >= 0.8
        print(f"\nğŸ¯ B2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™: {'âœ… å®Œäº†' if success else 'âŒ æ”¹å–„å¿…è¦'}")
        print("ğŸ“š çŸ¥è­˜ã¯å…±æœ‰ã•ã‚Œã‚‹ã“ã¨ã§ä¾¡å€¤ã‚’å‰µé€ ã™ã‚‹")
        
        return success
        
    except Exception as e:
        print(f"âŒ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    success = main()
    sys.exit(0 if success else 1)
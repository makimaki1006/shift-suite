<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>ğŸ§ª ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
    <p>ã“ã®ãƒšãƒ¼ã‚¸ã§JavaScriptæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã€Dashã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å•é¡Œã‚’ç‰¹å®šã—ã¾ã™ã€‚</p>
    
    <div id="results"></div>
    
    <script>
        function addResult(test, passed, details = '') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-result ${passed ? 'success' : 'error'}`;
            div.innerHTML = `
                <strong>${test}:</strong> ${passed ? 'âœ… åˆæ ¼' : 'âŒ å¤±æ•—'}
                ${details ? `<br><small>${details}</small>` : ''}
            `;
            results.appendChild(div);
        }
        
        // åŸºæœ¬JavaScriptæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        addResult('åŸºæœ¬JavaScriptå®Ÿè¡Œ', true, 'ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™');
        
        // ES6æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        try {
            const arrow = () => 'ES6 Arrow Function';
            const [a, b] = [1, 2];
            addResult('ES6æ©Ÿèƒ½', true, 'ã‚¢ãƒ­ãƒ¼é–¢æ•°ã¨åˆ†å‰²ä»£å…¥ãŒå‹•ä½œ');
        } catch (e) {
            addResult('ES6æ©Ÿèƒ½', false, e.message);
        }
        
        // Fetch API ãƒ†ã‚¹ãƒˆ
        if (typeof fetch !== 'undefined') {
            addResult('Fetch API', true, 'ãƒ¢ãƒ€ãƒ³HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½åˆ©ç”¨å¯èƒ½');
        } else {
            addResult('Fetch API', false, 'Fetch APIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
        }
        
        // Promise ãƒ†ã‚¹ãƒˆ
        try {
            new Promise((resolve) => resolve('test'))
                .then(() => addResult('Promise', true, 'éåŒæœŸå‡¦ç†æ©Ÿèƒ½ãŒæ­£å¸¸'));
        } catch (e) {
            addResult('Promise', false, e.message);
        }
        
        // LocalStorage ãƒ†ã‚¹ãƒˆ
        try {
            localStorage.setItem('test', 'value');
            localStorage.removeItem('test');
            addResult('LocalStorage', true, 'ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ©Ÿèƒ½æ­£å¸¸');
        } catch (e) {
            addResult('LocalStorage', false, e.message);
        }
        
        // React å‹•ä½œãƒ†ã‚¹ãƒˆ (CDNçµŒç”±)
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/react@18/umd/react.development.js';
        script.onload = () => {
            if (typeof React !== 'undefined') {
                addResult('React CDNèª­ã¿è¾¼ã¿', true, `React version: ${React.version}`);
            } else {
                addResult('React CDNèª­ã¿è¾¼ã¿', false, 'Reactã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ');
            }
        };
        script.onerror = () => {
            addResult('React CDNèª­ã¿è¾¼ã¿', false, 'React CDNã®èª­ã¿è¾¼ã¿ã«å¤±æ•—');
        };
        document.head.appendChild(script);
        
        // ãƒ­ãƒ¼ã‚«ãƒ«Dashã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
        setTimeout(() => {
            fetch('http://127.0.0.1:8053/')
                .then(response => {
                    if (response.ok) {
                        addResult('ãƒ­ãƒ¼ã‚«ãƒ«Dashã‚¢ãƒ—ãƒªæ¥ç¶š', true, `Status: ${response.status}`);
                        return response.text();
                    } else {
                        addResult('ãƒ­ãƒ¼ã‚«ãƒ«Dashã‚¢ãƒ—ãƒªæ¥ç¶š', false, `HTTP ${response.status}`);
                    }
                })
                .then(html => {
                    if (html && html.includes('react-entry-point')) {
                        addResult('Dashãƒšãƒ¼ã‚¸æ§‹é€ ', true, 'React entry pointãŒå­˜åœ¨');
                        
                        if (html.includes('_dash-loading')) {
                            addResult('Dashãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çŠ¶æ…‹', false, 'LoadingçŠ¶æ…‹ã§åœæ­¢ã—ã¦ã„ã‚‹å¯èƒ½æ€§');
                        } else {
                            addResult('Dashãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çŠ¶æ…‹', true, 'æ­£å¸¸ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å®Œäº†');
                        }
                    } else {
                        addResult('Dashãƒšãƒ¼ã‚¸æ§‹é€ ', false, 'æœŸå¾…ã•ã‚Œã‚‹HTMLæ§‹é€ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }
                })
                .catch(error => {
                    addResult('ãƒ­ãƒ¼ã‚«ãƒ«Dashã‚¢ãƒ—ãƒªæ¥ç¶š', false, error.message);
                });
        }, 3000);
        
        // 5ç§’å¾Œã«æœ€çµ‚è¨ºæ–­
        setTimeout(() => {
            const results = document.getElementById('results');
            const summary = document.createElement('div');
            summary.style.marginTop = '20px';
            summary.style.padding = '15px';
            summary.style.backgroundColor = '#e7f3ff';
            summary.style.borderRadius = '5px';
            summary.innerHTML = `
                <h3>ğŸ¯ è¨ºæ–­çµæœ</h3>
                <p><strong>ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼:</strong> ${navigator.userAgent}</p>
                <p><strong>æ™‚åˆ»:</strong> ${new Date().toLocaleString()}</p>
                <p>ä¸Šè¨˜ã®ãƒ†ã‚¹ãƒˆçµæœã‚’ç¢ºèªã—ã¦ã€Dashã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å•é¡Œç®‡æ‰€ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚</p>
            `;
            results.appendChild(summary);
        }, 8000);
    </script>
</body>
</html>
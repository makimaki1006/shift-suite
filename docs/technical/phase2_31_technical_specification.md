# Phase 2/3.1 æŠ€è¡“ä»•æ§˜æ›¸

**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆæ—¥**: 2025å¹´08æœˆ03æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025å¹´08æœˆ03æ—¥

## ğŸ“‹ æ¦‚è¦

æœ¬æ–‡æ›¸ã¯ã€Shift-Suite ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹Phase 2/3.1ã®SLOT_HOURSä¿®æ­£ã«é–¢ã™ã‚‹æŠ€è¡“ä»•æ§˜ã‚’è©³è¿°ã—ã¾ã™ã€‚

## ğŸ¯ ä¿®æ­£ã®èƒŒæ™¯ã¨ç›®çš„

### å•é¡Œã®ç™ºè¦‹
- **å•é¡Œ**: parsed_slots_countï¼ˆã‚¹ãƒ­ãƒƒãƒˆæ•°ï¼‰ã‚’æ™‚é–“ã¨ã—ã¦æ‰±ã†é‡è¤‡å¤‰æ›å•é¡Œ
- **å½±éŸ¿**: è¨ˆç®—çµæœãŒå®Ÿéš›ã®2å€ã«ãªã‚‹ç²¾åº¦å•é¡Œ
- **ç™ºè¦‹çµŒç·¯**: æ·±ã„æ€è€ƒã«ã‚ˆã‚‹ã€Œãªãœã“ã®å€¤ãªã®ã‹ã€ã®è¿½æ±‚

### è§£æ±ºæ–¹é‡
```
ä¿®æ­£å‰: parsed_slots_countï¼ˆæ—¢ã«æ™‚é–“ã¨èª¤èªï¼‰
ä¿®æ­£å¾Œ: parsed_slots_count Ã— SLOT_HOURSï¼ˆæ­£ç¢ºãªæ™‚é–“å¤‰æ›ï¼‰
```

## ğŸ”§ æŠ€è¡“çš„å¤‰æ›´å†…å®¹

### 1. Phase 2: FactExtractorPrototype
**ãƒ•ã‚¡ã‚¤ãƒ«**: `shift_suite/tasks/fact_extractor_prototype.py`

**ä¿®æ­£ç®‡æ‰€**: 4ç®‡æ‰€
```python
# ä¿®æ­£ä¾‹
total_hours = group['parsed_slots_count'].sum() * SLOT_HOURS
```

### 2. Phase 3.1: LightweightAnomalyDetector  
**ãƒ•ã‚¡ã‚¤ãƒ«**: `shift_suite/tasks/lightweight_anomaly_detector.py`

**ä¿®æ­£ç®‡æ‰€**: 1ç®‡æ‰€
```python
# ä¿®æ­£ä¾‹
monthly_hours = work_df.groupby(['staff', 'year_month'])['parsed_slots_count'].sum() * SLOT_HOURS
```

### 3. å®šæ•°å®šç¾©
```python
SLOT_HOURS = 0.5  # 30åˆ†ã‚¹ãƒ­ãƒƒãƒˆ = 0.5æ™‚é–“
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
Excelå…¥åŠ› â†’ io_excel.py â†’ parsed_slots_countï¼ˆæ•´æ•°ï¼‰
                           â†“
Phase 2/3.1 â†’ parsed_slots_count Ã— SLOT_HOURS â†’ æ™‚é–“ï¼ˆæµ®å‹•å°æ•°ç‚¹ï¼‰
                           â†“
FactBookVisualizer â†’ dash_fact_book_integration â†’ dash_app.py
```

## ğŸ§ª å“è³ªä¿è¨¼

### ãƒ†ã‚¹ãƒˆé …ç›®
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: SLOT_HOURSè¨ˆç®—ã®æ­£ç¢ºæ€§
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: Phase 2/3.1é–“ã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§
3. **å›å¸°ãƒ†ã‚¹ãƒˆ**: æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ç¢ºèª

### æ¤œè¨¼æ–¹æ³•
```python
# æ¤œè¨¼ä¾‹
slots = 8
expected_hours = 4.0
actual_hours = slots * SLOT_HOURS
assert abs(actual_hours - expected_hours) < 0.001
```

## âš ï¸ é‡è¦ãªè€ƒæ…®äº‹é …

### å‰ææ¡ä»¶ã®æ˜ç¢ºåŒ–
- **30åˆ†ã‚¹ãƒ­ãƒƒãƒˆ**: ç¾åœ¨ã®å‰æã ãŒã€æ¥­å‹™å®Ÿæ…‹ã¨ã®é©åˆæ€§è¦æ¤œè¨¼
- **ä¸€å¾‹å¤‰æ›**: å…¨æ¥­å‹™ã‚’åŒç­‰æ‰±ã„ã—ã¦ã„ã‚‹ãŒã€é‡ã¿ä»˜ã‘ã®ä½™åœ°ã‚ã‚Š
- **æ•°å€¤ã®æ„å‘³**: 670æ™‚é–“ã¯ã€Œç¾åœ¨ã®è¨ˆç®—çµæœã€ã§ã‚ã‚Šã€Œçµ¶å¯¾çš„çœŸå®Ÿã€ã§ã¯ãªã„

### ç¶™ç¶šçš„æ”¹å–„ã®è¦–ç‚¹
- ã‚ˆã‚Šè‰¯ã„æ™‚é–“å˜ä½ã®å¯èƒ½æ€§ï¼ˆ15åˆ†ã€å¯å¤‰ã‚¹ãƒ­ãƒƒãƒˆï¼‰
- è³ªçš„è©•ä¾¡ã®å°å…¥ï¼ˆã‚¹ã‚­ãƒ«Ã—æ™‚é–“ï¼‰
- æ¥­å‹™å®Ÿæ…‹ã¨ã®ç¶™ç¶šçš„ç…§åˆ

## ğŸ”§ è¨­å®šãƒ»ç’°å¢ƒ

### å¿…è¦ãªä¾å­˜é–¢ä¿‚
```
pandas >= 1.0.0
numpy >= 1.18.0
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```json
{
    "SLOT_HOURS": 0.5,
    "calculation_precision": 3,
    "validation_enabled": true
}
```

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

### è¨ˆç®—æ€§èƒ½
- **åŸºæœ¬è¨ˆç®—**: <0.001ç§’
- **å¤§é‡ãƒ‡ãƒ¼ã‚¿ï¼ˆ1000ä»¶ï¼‰**: 0.0002ç§’
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: æœ€å°é™ï¼ˆin-placeè¨ˆç®—ï¼‰

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **ç·šå½¢ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: ãƒ‡ãƒ¼ã‚¿é‡ã«æ¯”ä¾‹ã—ãŸå‡¦ç†æ™‚é–“
- **ç²¾åº¦ä¿æŒ**: å¤§è¦æ¨¡é›†è¨ˆã§ã®ç´¯ç©èª¤å·®ãªã—

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
2. æ§‹æ–‡ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
3. Phase 2/3.1ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
4. çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. æœ¬ç•ªåæ˜ 

### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©æ—§
cp backup/fact_extractor_prototype.py shift_suite/tasks/
cp backup/lightweight_anomaly_detector.py shift_suite/tasks/
```

## ğŸ“ å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|------|-----------|----------|--------|
| 2025-08-03 | 1.0 | åˆç‰ˆä½œæˆã€SLOT_HOURSä¿®æ­£å®Ÿè£… | Claude Code |

## ğŸ”— é–¢é€£æ–‡æ›¸

- [é‹ç”¨ãƒ»ä¿å®ˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«](../operational/operations_maintenance_manual.md)
- [ç¶™ç¶šçš„æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯](../improvement/continuous_improvement_framework.md)
- [APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ä»•æ§˜æ›¸](api_dataflow_specification.md)

---
*æœ¬æ–‡æ›¸ã¯ç¶™ç¶šçš„æ”¹å–„ã®ç²¾ç¥ã«åŸºã¥ãã€å®šæœŸçš„ãªè¦‹ç›´ã—ã¨æ›´æ–°ã‚’è¡Œã„ã¾ã™ã€‚*
